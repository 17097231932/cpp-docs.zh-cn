---
title: CMFCToolBarButton 类
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeDropped
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStored
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStretched
- AFXTOOLBARBUTTON/CMFCToolBarButton::CompareWith
- AFXTOOLBARBUTTON/CMFCToolBarButton::CopyFrom
- AFXTOOLBARBUTTON/CMFCToolBarButton::CreateFromOleData
- AFXTOOLBARBUTTON/CMFCToolBarButton::EnableWindow
- AFXTOOLBARBUTTON/CMFCToolBarButton::ExportToMenuButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetClipboardFormat
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetHwnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetInvalidateRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetTextSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::HasFocus
- AFXTOOLBARBUTTON/CMFCToolBarButton::HaveHotBorder
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawText
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDroppedDown
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsEditable
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsExtraSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsFirstInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHidden
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHorizontal
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLastInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLocked
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsOwnerOf
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsWindowVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::NotifyCommand
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnAddToCustomizePage
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrop
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCalculateSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCancelMode
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnChangeParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClick
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClickUp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnContextHelp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCtlColor
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCustomizeMenu
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDblClk
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDraw
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDrawOnCustomizeList
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGetCustomToolTipText
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGlobalFontsChanged
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnMove
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnShow
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnToolHitTest
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnUpdateToolTip
- AFXTOOLBARBUTTON/CMFCToolBarButton::PrepareDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::Rect
- AFXTOOLBARBUTTON/CMFCToolBarButton::ResetImageToDefault
- AFXTOOLBARBUTTON/CMFCToolBarButton::SaveBarState
- AFXTOOLBARBUTTON/CMFCToolBarButton::Serialize
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetACCData
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetClipboardFormatName
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRadio
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::Show
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bTextBelow
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bUserButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWholeText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrap
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrapText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nID
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_strText
helpviewer_keywords:
- CMFCToolBarButton [MFC], CMFCToolBarButton
- CMFCToolBarButton [MFC], CanBeDropped
- CMFCToolBarButton [MFC], CanBeStored
- CMFCToolBarButton [MFC], CanBeStretched
- CMFCToolBarButton [MFC], CompareWith
- CMFCToolBarButton [MFC], CopyFrom
- CMFCToolBarButton [MFC], CreateFromOleData
- CMFCToolBarButton [MFC], EnableWindow
- CMFCToolBarButton [MFC], ExportToMenuButton
- CMFCToolBarButton [MFC], GetClipboardFormat
- CMFCToolBarButton [MFC], GetHwnd
- CMFCToolBarButton [MFC], GetImage
- CMFCToolBarButton [MFC], GetInvalidateRect
- CMFCToolBarButton [MFC], GetParentWnd
- CMFCToolBarButton [MFC], GetProtectedCommands
- CMFCToolBarButton [MFC], GetTextSize
- CMFCToolBarButton [MFC], HasFocus
- CMFCToolBarButton [MFC], HaveHotBorder
- CMFCToolBarButton [MFC], IsDrawImage
- CMFCToolBarButton [MFC], IsDrawText
- CMFCToolBarButton [MFC], IsDroppedDown
- CMFCToolBarButton [MFC], IsEditable
- CMFCToolBarButton [MFC], IsExtraSize
- CMFCToolBarButton [MFC], IsFirstInGroup
- CMFCToolBarButton [MFC], IsHidden
- CMFCToolBarButton [MFC], IsHorizontal
- CMFCToolBarButton [MFC], IsLastInGroup
- CMFCToolBarButton [MFC], IsLocked
- CMFCToolBarButton [MFC], IsOwnerOf
- CMFCToolBarButton [MFC], IsVisible
- CMFCToolBarButton [MFC], IsWindowVisible
- CMFCToolBarButton [MFC], NotifyCommand
- CMFCToolBarButton [MFC], OnAddToCustomizePage
- CMFCToolBarButton [MFC], OnBeforeDrag
- CMFCToolBarButton [MFC], OnBeforeDrop
- CMFCToolBarButton [MFC], OnCalculateSize
- CMFCToolBarButton [MFC], OnCancelMode
- CMFCToolBarButton [MFC], OnChangeParentWnd
- CMFCToolBarButton [MFC], OnClick
- CMFCToolBarButton [MFC], OnClickUp
- CMFCToolBarButton [MFC], OnContextHelp
- CMFCToolBarButton [MFC], OnCtlColor
- CMFCToolBarButton [MFC], OnCustomizeMenu
- CMFCToolBarButton [MFC], OnDblClk
- CMFCToolBarButton [MFC], OnDraw
- CMFCToolBarButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarButton [MFC], OnGetCustomToolTipText
- CMFCToolBarButton [MFC], OnGlobalFontsChanged
- CMFCToolBarButton [MFC], OnMove
- CMFCToolBarButton [MFC], OnShow
- CMFCToolBarButton [MFC], OnSize
- CMFCToolBarButton [MFC], OnToolHitTest
- CMFCToolBarButton [MFC], OnUpdateToolTip
- CMFCToolBarButton [MFC], PrepareDrag
- CMFCToolBarButton [MFC], Rect
- CMFCToolBarButton [MFC], ResetImageToDefault
- CMFCToolBarButton [MFC], SaveBarState
- CMFCToolBarButton [MFC], Serialize
- CMFCToolBarButton [MFC], SetACCData
- CMFCToolBarButton [MFC], SetClipboardFormatName
- CMFCToolBarButton [MFC], SetImage
- CMFCToolBarButton [MFC], SetProtectedCommands
- CMFCToolBarButton [MFC], SetRadio
- CMFCToolBarButton [MFC], SetRect
- CMFCToolBarButton [MFC], SetStyle
- CMFCToolBarButton [MFC], SetVisible
- CMFCToolBarButton [MFC], Show
- CMFCToolBarButton [MFC], m_bImage
- CMFCToolBarButton [MFC], m_bText
- CMFCToolBarButton [MFC], m_bTextBelow
- CMFCToolBarButton [MFC], m_bUserButton
- CMFCToolBarButton [MFC], m_bWholeText
- CMFCToolBarButton [MFC], m_bWrap
- CMFCToolBarButton [MFC], m_bWrapText
- CMFCToolBarButton [MFC], m_nID
- CMFCToolBarButton [MFC], m_nStyle
- CMFCToolBarButton [MFC], m_strText
ms.assetid: 8a6ecffb-86b0-4f5c-8211-a9146b463efd
ms.openlocfilehash: 0a3af2b13eeb2775671ee89019b1562010acc059
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "62218339"
---
# <a name="cmfctoolbarbutton-class"></a>CMFCToolBarButton 类

提供为工具栏按钮功能。

## <a name="syntax"></a>语法

```
class CMFCToolBarButton : public CObject
```

## <a name="members"></a>成员

### <a name="public-constructors"></a>公共构造函数

|名称|描述|
|----------|-----------------|
|[CMFCToolBarButton::CMFCToolBarButton](#cmfctoolbarbutton)|构造并初始化一个 `CMFCToolBarButton` 对象。|
|`CMFCToolBarButton::~CMFCToolBarButton`|析构函数。|

### <a name="public-methods"></a>公共方法

|名称|描述|
|----------|-----------------|
|[CMFCToolBarButton::CanBeDropped](#canbedropped)|指定用户是否可以自定义期间放置工具栏或菜单上的按钮。|
|[CMFCToolBarButton::CanBeStored](#canbestored)|指定是否可以存储该按钮。|
|[CMFCToolBarButton::CanBeStretched](#canbestretched)|指定用户是否可以自定义期间延伸按钮。|
|[CMFCToolBarButton::CompareWith](#comparewith)|将此实例与所提供`CMFCToolBarButton`对象。|
|[CMFCToolBarButton::CopyFrom](#copyfrom)|将另一个工具栏按钮的属性复制到当前按钮。|
|[CMFCToolBarButton::CreateFromOleData](#createfromoledata)|创建`CMFCToolBarButton`从所提供的对象`COleDataObject`对象。|
|`CMFCToolBarButton::CreateObject`|由框架用于创建此类类型的动态实例。|
|[CMFCToolBarButton::EnableWindow](#enablewindow)|启用或禁用鼠标和键盘输入。|
|[CMFCToolBarButton::ExportToMenuButton](#exporttomenubutton)|副本中的工具栏按钮的文本复制到菜单。|
|[CMFCToolBarButton::GetClipboardFormat](#getclipboardformat)|检索应用程序的全局剪贴板格式。|
|[CMFCToolBarButton::GetHwnd](#gethwnd)|检索与工具栏按钮相关联的窗口句柄。|
|[CMFCToolBarButton::GetImage](#getimage)|检索按钮的图像索引。|
|[CMFCToolBarButton::GetInvalidateRect](#getinvalidaterect)|检索必须重新绘制按钮的客户端区域的区域。|
|[CMFCToolBarButton::GetParentWnd](#getparentwnd)|检索按钮的父窗口。|
|[CMFCToolBarButton::GetProtectedCommands](#getprotectedcommands)|检索的用户不能自定义的命令的列表。|
|[CMFCToolBarButton::GetTextSize](#gettextsize)|检索按钮文本的大小。|
|[CMFCToolBarButton::HasFocus](#hasfocus)|确定按钮是否具有当前输入的焦点。|
|[CMFCToolBarButton::HaveHotBorder](#havehotborder)|确定当用户选择按钮时是否显示按钮的边框。|
|[CMFCToolBarButton::IsDrawImage](#isdrawimage)|确定是否在按钮上显示图像。|
|[CMFCToolBarButton::IsDrawText](#isdrawtext)|确定是否在按钮上显示的文本标签。|
|[CMFCToolBarButton::IsDroppedDown](#isdroppeddown)|确定按钮是否显示子菜单。|
|[CMFCToolBarButton::IsEditable](#iseditable)|确定是否可以自定义按钮。|
|[CMFCToolBarButton::IsExtraSize](#isextrasize)|确定是否可以使用扩展的边框来显示该按钮。|
|[CMFCToolBarButton::IsFirstInGroup](#isfirstingroup)|确定按钮是否在其按钮组中的第一个位置。|
|[CMFCToolBarButton::IsHidden](#ishidden)|确定按钮处于隐藏状态。|
|[CMFCToolBarButton::IsHorizontal](#ishorizontal)|确定是否将该按钮位于水平工具栏上。|
|[CMFCToolBarButton::IsLastInGroup](#islastingroup)|指定的按钮是否在其按钮组中的最后一个位置中。|
|[CMFCToolBarButton::IsLocked](#islocked)|确定是否已启用锁定的 （非可自定义） 工具栏的按钮。|
|[CMFCToolBarButton::IsOwnerOf](#isownerof)|确定按钮是否为提供的窗口句柄的所有者。|
|[CMFCToolBarButton::IsVisible](#isvisible)|确定工具栏按钮是否可见。|
|[CMFCToolBarButton::IsWindowVisible](#iswindowvisible)|确定基础窗口句柄的按钮是否可见。|
|[CMFCToolBarButton::NotifyCommand](#notifycommand)|指定是否处理按钮[WM_COMMAND](/windows/desktop/menurc/wm-command)消息。|
|[CMFCToolBarButton::OnAddToCustomizePage](#onaddtocustomizepage)|由框架调用时该按钮添加到**自定义**对话框。|
|[CMFCToolBarButton::OnBeforeDrag](#onbeforedrag)|指定是否可以拖动按钮。|
|[CMFCToolBarButton::OnBeforeDrop](#onbeforedrop)|指定用户是否可以删除到目标工具栏上的按钮。|
|[CMFCToolBarButton::OnCalculateSize](#oncalculatesize)|由框架调用以计算指定的设备上下文和停靠状态的按钮的大小。|
|[CMFCToolBarButton::OnCancelMode](#oncancelmode)|由框架调用以处理[WM_CANCELMODE](/windows/desktop/winmsg/wm-cancelmode)消息。|
|[CMFCToolBarButton::OnChangeParentWnd](#onchangeparentwnd)|按钮插入到一个新的工具栏中时由框架调用。|
|[CMFCToolBarButton::OnClick](#onclick)|当用户单击鼠标按钮时由框架调用。|
|[CMFCToolBarButton::OnClickUp](#onclickup)|当用户释放鼠标按钮时由框架调用。|
|[CMFCToolBarButton::OnContextHelp](#oncontexthelp)|当在父级工具栏处理 WM_HELPHITTEST 消息时由框架调用。|
|[CMFCToolBarButton::OnCtlColor](#onctlcolor)|当在父级工具栏处理 WM_CTLCOLOR 消息时由框架调用。|
|[CMFCToolBarButton::OnCustomizeMenu](#oncustomizemenu)|允许修改提供的菜单时应用程序将显示在父级工具栏上的快捷菜单的按钮。|
|[CMFCToolBarButton::OnDblClk](#ondblclk)|当在父级工具栏处理时由框架调用[需知道 WM_LBUTTONDBLCLK](/windows/desktop/inputdev/wm-lbuttondblclk)消息。|
|[CMFCToolBarButton::OnDraw](#ondraw)|由框架调用以绘制按钮通过使用指定的样式和选项。|
|[CMFCToolBarButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|由框架调用以将按钮画入**命令**窗格**自定义**对话框。|
|[CMFCToolBarButton::OnGetCustomToolTipText](#ongetcustomtooltiptext)|由框架调用以检索按钮的自定义工具提示文本。|
|[CMFCToolBarButton::OnGlobalFontsChanged](#onglobalfontschanged)|全局字体发生更改时由框架调用。|
|[CMFCToolBarButton::OnMove](#onmove)|当在父级工具栏移动时由框架调用。|
|[CMFCToolBarButton::OnShow](#onshow)|由框架调用时该按钮即变为可见或不可见。|
|[CMFCToolBarButton::OnSize](#onsize)|在父级工具栏更改其大小或位置和此更改需要更改大小的按钮时由框架调用。|
|[CMFCToolBarButton::OnToolHitTest](#ontoolhittest)|当在父级工具栏必须确定一个点是按钮的边框内时由框架调用。|
|[CMFCToolBarButton::OnUpdateToolTip](#onupdatetooltip)|在父级工具栏更新其工具提示文本时由框架调用。|
|[CMFCToolBarButton::PrepareDrag](#preparedrag)|当该按钮要执行拖放操作时由框架调用。|
|[CMFCToolBarButton::Rect](#rect)|检索按钮的边框。|
|[CMFCToolBarButton::ResetImageToDefault](#resetimagetodefault)|设置为默认值是与按钮关联的图像。|
|[CMFCToolBarButton::SaveBarState](#savebarstate)|保存的工具栏按钮的状态。|
|[CMFCToolBarButton::Serialize](#serialize)|从存档读取此对象或将其写入到存档。 （重写 [CObject::Serialize](../../mfc/reference/cobject-class.md#serialize)。）|
|[CMFCToolBarButton::SetACCData](#setaccdata)|填充所提供`CAccessibilityData`对象从工具栏按钮可访问性数据。|
|[CMFCToolBarButton::SetClipboardFormatName](#setclipboardformatname)|重命名的全局剪贴板格式。|
|[CMFCToolBarButton::SetImage](#setimage)|设置按钮的图像索引。|
|[CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands)|设置的用户不能自定义的命令的列表。|
|[CMFCToolBarButton::SetRadio](#setradio)|一个按钮更改其选中的状态时，由框架调用。|
|[CMFCToolBarButton::SetRect](#setrect)|设置按钮的边框。|
|[CMFCToolBarButton::SetStyle](#setstyle)|设置按钮的样式。|
|[CMFCToolBarButton::SetVisible](#setvisible)|指定的按钮是否可见。|
|[CMFCToolBarButton::Show](#show)|显示或隐藏按钮。|

### <a name="data-members"></a>数据成员

|名称|描述|
|----------|-----------------|
|[CMFCToolBarButton::m_bImage](#m_bimage)|指定是否在按钮上显示图像。|
|[CMFCToolBarButton::m_bText](#m_btext)|指定是否在按钮上显示的文本标签。|
|[CMFCToolBarButton::m_bTextBelow](#m_btextbelow)|指定是否下方的按钮的图像显示的文本标签。|
|[CMFCToolBarButton::m_bUserButton](#m_buserbutton)|指定该按钮是否具有用户定义的映像。|
|[CMFCToolBarButton::m_bWholeText](#m_bwholetext)|指定即使无法容纳在边框中的按钮是否显示其完整文本标签。|
|[CMFCToolBarButton::m_bWrap](#m_bwrap)|指定是否将在下一行中放置分隔符旁边的按钮。|
|[CMFCToolBarButton::m_bWrapText](#m_bwraptext)|指定是否启用多行文本标签。|
|[CMFCToolBarButton::m_nID](#m_nid)|按钮的命令 ID。|
|[CMFCToolBarButton::m_nStyle](#m_nstyle)|按钮的样式。|
|[CMFCToolBarButton::m_strText](#m_strtext)|按钮的文本标签。|

## <a name="remarks"></a>备注

一个`CMFCToolbarButton`对象是驻留在工具栏的控件。 其行为类似于普通按钮。 可以将图像和文本标签分配给此对象。 工具栏按钮也可以是命令 id。 当用户单击工具栏按钮时，框架将执行此 ID 指定的命令。

通常情况下，可以自定义工具栏按钮： 用户可以将从一个工具栏按钮拖动到另一个，并复制、 粘贴、 删除和编辑文本标签和图像。 若要防止用户自定义工具栏，可以在以下两种方式锁定工具栏。 设置`bLocked`标志为 TRUE 时，调用[CMFCToolBar::LoadToolBar](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar)，或使用将个别按钮的命令 ID 添加到受保护的命令的全局列表[CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands)方法。

`CMFCToolBarButton` 对象在应用程序中显示的工具栏图像的全局集合中的映像。 这些集合由在父级工具栏中，维护[CMFCToolBar 类](../../mfc/reference/cmfctoolbar-class.md)。 有关详细信息，请参阅[CMFCToolBarImages 类](../../mfc/reference/cmfctoolbarimages-class.md)。

当用户单击的工具栏按钮时，其在父级工具栏将处理鼠标消息，进行通信的相应操作的按钮。 如果该按钮具有有效的命令 ID，在父级工具栏将 WM_COMMAND 消息发送到父框架。

`CMFCToolBarButton`类是基类的其他工具栏按钮类，如[CMFCToolBarMenuButton 类](../../mfc/reference/cmfctoolbarmenubutton-class.md)， [CMFCToolBarEditBoxButton 类](../../mfc/reference/cmfctoolbareditboxbutton-class.md)，并[CMFCToolBarComboBoxButton 类](../../mfc/reference/cmfctoolbarcomboboxbutton-class.md)。

## <a name="example"></a>示例

下面的示例演示如何配置`CMFCToolBarButton`通过使用中的各种方法的对象`CMFCToolBarButton`类。 该示例说明了如何启用鼠标和键盘输入，设置按钮的图像索引，设置按钮的边框以及使按钮可见。 此代码片段属于[选项卡控件示例](../../overview/visual-cpp-samples.md)。

[!code-cpp[NVC_MFC_TabControl#1](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_1.cpp)]
[!code-cpp[NVC_MFC_TabControl#2](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_2.cpp)]

## <a name="inheritance-hierarchy"></a>继承层次结构

[CObject](../../mfc/reference/cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

## <a name="requirements"></a>要求

**标头：** afxtoolbarbutton.h

##  <a name="canbedropped"></a>  CMFCToolBarButton::CanBeDropped

指定用户是否可以自定义期间放置工具栏或菜单上的按钮。

```
virtual BOOL CanBeDropped(CMFCToolBar* pToolbar);
```

### <a name="parameters"></a>参数

*pToolbar*<br/>
[in]未使用。

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

默认情况下，工具栏按钮可以删除在每个可自定义 （即未锁定） 工具栏。

此方法的默认实现，则返回 TRUE。 重写此方法并返回 FALSE，如果你想要阻止用户重新定位按钮。

##  <a name="canbestored"></a>  CMFCToolBarButton::CanBeStored

确定是否可以存储该按钮。

```
virtual BOOL CanBeStored() const;
```

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

该框架使用此方法来确定该按钮可以参与拖放操作。

默认实现，则返回 TRUE。 如果不能作为拖放操作的一部分存储你的按钮，重写此方法。 有关拖放操作的详细信息，请参阅[拖放 (OLE)](../../mfc/drag-and-drop-ole.md)。

##  <a name="canbestretched"></a>  CMFCToolBarButton::CanBeStretched

指定用户是否可以自定义期间延伸按钮。

```
virtual BOOL CanBeStretched() const;
```

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法由框架用于确定是否可以在自定义模式拉伸该按钮。

此方法的默认实现返回 FALSE。 重写此方法以返回 TRUE，返回为组合框或滑块等宽度可变的控件。

有关自定义模式的详细信息，请参阅[CMFCToolBar::SetCustomizeMode](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode)。

##  <a name="cmfctoolbarbutton"></a>  CMFCToolBarButton::CMFCToolBarButton

构造并初始化一个 `CMFCToolBarButton` 对象。

```
CMFCToolBarButton(
    UINT uiID,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE,
    BOOL bLocked=FALSE);
```

### <a name="parameters"></a>参数

*uiID*<br/>
[in]按钮的命令 ID。

*iImage*<br/>
[in]图像集合中的按钮图像索引。

*lpszText*<br/>
[in]按钮的文本标签。 可以为 NULL。

*bUserButton*<br/>
[in]一个布尔值，该值确定按钮是否为用户定义。 如果此参数为 TRUE，该按钮是用户定义的。 否则，将从资源加载按钮图像。

*bLocked*<br/>
[in]一个布尔值，该值确定是否可以自定义按钮。 如果此参数为 TRUE，则不能自定义按钮。 否则，可以自定义按钮。

##  <a name="comparewith"></a>  CMFCToolBarButton::CompareWith

将此实例与所提供`CMFCToolBarButton`对象。

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>参数

*other*<br/>
[in]对要与此实例进行比较的对象的引用。

### <a name="return-value"></a>返回值

如果所提供的对象等于此实例; 的值，非零值否则为为 0。

### <a name="remarks"></a>备注

默认实现确定所提供的对象的命令 ID 是否等于此实例的命令 ID。 如果必须执行其他处理，以确定是否有两个重写此方法`CMFCToolBarButton`对象是否相等。

##  <a name="copyfrom"></a>  CMFCToolBarButton::CopyFrom

将另一个工具栏按钮的属性复制到当前按钮。

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>参数

*src*<br/>
[in]对源按钮从其复制的引用。

### <a name="remarks"></a>备注

调用此方法以将另一个工具栏按钮复制到此工具栏按钮。

##  <a name="createfromoledata"></a>  CMFCToolBarButton::CreateFromOleData

创建`CMFCToolBarButton`从所提供的对象`COleDataObject`对象。

```
static CMFCToolBarButton* __stdcall CreateFromOleData(COleDataObject* pDataObject);
```

### <a name="parameters"></a>参数

*pDataObject*<br/>
[in]源的 OLE 数据对象。

### <a name="return-value"></a>返回值

创建的 `CMFCToolBarButton` 对象。

### <a name="remarks"></a>备注

此方法由框架用于执行各种格式的数据传输。 例如，`CMFCOutlookBarPane::OnDragOver`方法使用此方法来执行拖放操作。

##  <a name="enablewindow"></a>  CMFCToolBarButton::EnableWindow

启用或禁用鼠标和键盘输入。

```
virtual void EnableWindow(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>参数

*bEnable*<br/>
[in]此参数设置为 true 可启用输入，或为 FALSE 可禁用输入。

### <a name="remarks"></a>备注

此方法调用`EnableWindow`函数来启用或禁用输入。 有关详细信息，请参阅[EnableWindow](/windows/desktop/api/winuser/nf-winuser-enablewindow) Windows SDK 中。

##  <a name="exporttomenubutton"></a>  CMFCToolBarButton::ExportToMenuButton

副本中的工具栏按钮的文本复制到菜单。

```
virtual BOOL ExportToMenuButton(CMFCToolBarMenuButton& menuButton) const;
```

### <a name="parameters"></a>参数

*menuButton*<br/>
[in]对目标菜单按钮的引用。

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

框架调用此方法以从工具栏按钮的文本复制到的菜单按钮。 默认实现将复制该按钮的文本标签。 如果为空的文本标签，此方法复制该按钮的工具提示文本。

此方法的默认实现，则返回 TRUE。 如果你想要采取其他操作，框架将转换为派生自的对象时重写此方法[CMFCToolbarButton](../../mfc/reference/cmfctoolbarbutton-class.md)到菜单按钮。

##  <a name="getclipboardformat"></a>  CMFCToolBarButton::GetClipboardFormat

检索应用程序的全局剪贴板格式。

```
static CLIPFORMAT __stdcall GetClipboardFormat();
```

### <a name="return-value"></a>返回值

应用程序全局 CLIPFORMAT 值。

### <a name="remarks"></a>备注

框架调用此方法以检索 OLE 数据传输操作的剪贴板格式。 例如， [CMFCToolBarButton::CreateFromOleData](#createfromoledata)方法使用此方法将数据复制源 OLE 数据对象中。

此方法设置调用此方法的全局 CLIPFORMAT 值第一个时间。 所有后续调用此方法返回此值。

若要允许应用程序之间发生的拖放操作，请调用[CMFCToolBarButton::SetClipboardFormatName](#setclipboardformatname)方法。

有关在 MFC 中的剪贴板的详细信息，请参阅[剪贴板](../../mfc/clipboard.md)。

##  <a name="gethwnd"></a>  CMFCToolBarButton::GetHwnd

检索与工具栏按钮相关联的窗口句柄。

```
virtual HWND GetHwnd();
```

### <a name="return-value"></a>返回值

如果工具栏按钮必须没有关联的窗口句柄，则关联的工具栏按钮或 NULL 窗口句柄。

### <a name="remarks"></a>备注

此方法的默认实现返回 NULL。 重写此方法以返回特定控件的窗口句柄。

##  <a name="getimage"></a>  CMFCToolBarButton::GetImage

检索按钮的图像索引。

```
int GetImage() const;
```

### <a name="return-value"></a>返回值

与此按钮关联的图像的索引。

### <a name="remarks"></a>备注

如果该按钮具有用户定义的映像 (即，如果*bUserButton*是 TRUE 的构造函数中)，返回的索引的用户定义的映像集合中指定的图像 (请参阅[CMFCToolBar::GetUserImages](../../mfc/reference/cmfctoolbar-class.md#getuserimages)). 否则，索引从资源文件加载的图像集合中指定的图像 (请参阅[CMFCToolBar::GetImages](../../mfc/reference/cmfctoolbar-class.md#getimages))。 有关资源文件的详细信息，请参阅[Working with Resource Files](../../windows/working-with-resource-files.md)。

##  <a name="getinvalidaterect"></a>  CMFCToolBarButton::GetInvalidateRect

检索必须重新绘制按钮的客户端区域的区域。

```
virtual const CRect GetInvalidateRect() const;
```

### <a name="return-value"></a>返回值

一个`CRect`对象，它指定必须重新绘制的区域。

### <a name="remarks"></a>备注

此方法的默认实现返回整个工作区。 如果你想要重新绘制的不同区域，重写此方法。

##  <a name="getparentwnd"></a>  CMFCToolBarButton::GetParentWnd

检索按钮的父窗口。

```
CWnd* GetParentWnd() const;
```

### <a name="return-value"></a>返回值

按钮的父窗口。

##  <a name="getprotectedcommands"></a>  CMFCToolBarButton::GetProtectedCommands

检索的用户不能自定义的命令的列表。

```
static const CList<UINT,UINT>& GetProtectedCommands();
```

### <a name="return-value"></a>返回值

受保护的命令的列表。

### <a name="remarks"></a>备注

在自定义模式下，框架会禁用受保护的工具栏按钮命令。 用户不能执行拖放和编辑已禁用的工具栏按钮上的操作。

使用[CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands)方法来定义列表的受保护的命令。

##  <a name="gettextsize"></a>  CMFCToolBarButton::GetTextSize

检索按钮文本的大小。

```
SIZE GetTextSize() const;
```

### <a name="return-value"></a>返回值

一个包含大小，单位为像素，按钮文本的大小对象。

##  <a name="hasfocus"></a>  CMFCToolBarButton::HasFocus

确定按钮是否具有当前输入的焦点。

```
virtual BOOL HasFocus() const;
```

### <a name="return-value"></a>返回值

如果该按钮具有输入的焦点，则为非零值否则为 0。

### <a name="remarks"></a>备注

如果该按钮具有输入的焦点，或者是具有输入的焦点的窗口，一个子节点或子代窗口，此方法的默认实现返回非零值。 您可以重写此函数可自定义此行为。

##  <a name="havehotborder"></a>  CMFCToolBarButton::HaveHotBorder

确定当用户选择按钮时是否显示按钮的边框。

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

框架调用此方法以确定当用户选择它时，工具栏按钮是否应显示其边框。

默认实现，则返回 TRUE。 可以重写此方法以自定义此行为。

##  <a name="isdrawimage"></a>  CMFCToolBarButton::IsDrawImage

确定是否在按钮上显示图像。

```
BOOL IsDrawImage() const;
```

### <a name="return-value"></a>返回值

图像显示的按钮; 如果非零值否则为 0。

### <a name="remarks"></a>备注

此方法返回 FALSE，如果该工具栏按钮不具有任何关联的图像 ( [CMFCToolBarButton::GetImage](#getimage)将返回-1) 或如果[CMFCToolBarButton::m_bImage](#m_bimage)设置为 FALSE。

##  <a name="isdrawtext"></a>  CMFCToolBarButton::IsDrawText

确定是否在按钮上显示的文本标签。

```
BOOL IsDrawText() const;
```

### <a name="return-value"></a>返回值

如果显示的文本标签，则非零值否则为 0。

### <a name="remarks"></a>备注

如果工具栏按钮不具有任何关联的文本标签，此方法返回 FALSE ( [CMFCToolBarButton::m_strText](#m_strtext)为空) 或[CMFCToolBarButton::m_bText](#m_btext)设置为 FALSE。

##  <a name="isdroppeddown"></a>  CMFCToolBarButton::IsDroppedDown

确定按钮是否显示子菜单。

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法的默认实现返回 FALSE。 重写此方法返回 TRUE，如果您的控件显示的子菜单。

##  <a name="iseditable"></a>  CMFCToolBarButton::IsEditable

确定是否可以自定义按钮。

```
virtual BOOL IsEditable() const;
```

### <a name="return-value"></a>返回值

如果用户可以自定义按钮，非零值否则为 0。

### <a name="remarks"></a>备注

框架调用此方法以确定用户是否可以通过使用拖放自定义工具栏按钮或编辑操作。

默认实现返回 FALSE，如果该按钮的命令 ID 是标准命令 (您可以通过调用确定`IsStandardCommand`函数) 或者的命令 ID 是在列表中受到保护命令。 有关受保护的命令的详细信息，请参阅[CMFCToolBarButton::GetProtectedCommands](#getprotectedcommands)并[CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands)。

重写此方法以自定义其行为。

##  <a name="isextrasize"></a>  CMFCToolBarButton::IsExtraSize

确定是否可以使用扩展的边框来显示该按钮。

```
virtual BOOL IsExtraSize() const;
```

### <a name="return-value"></a>返回值

如果可以使用扩展的边框; 来显示工具栏按钮，非零值否则为 0。

### <a name="remarks"></a>备注

多个外观边框的工具栏按钮 （例如，圆形按钮） 使用额外的大小。

如果用户将此按钮从一个工具栏移到另一个，框架将调用[CMFCToolBarButton::OnChangeParentWnd](#onchangeparentwnd)方法。 [CMFCToolBarButton::OnChangeParentWnd](#onchangeparentwnd)方法将额外大小标志设置为的新父级工具栏 (有关详细信息，请参阅[CMFCToolBar::IsButtonExtraSizeAvailable](../../mfc/reference/cmfctoolbar-class.md#isbuttonextrasizeavailable))。

##  <a name="isfirstingroup"></a>  CMFCToolBarButton::IsFirstInGroup

确定按钮是否在其按钮组中的第一个位置。

```
virtual BOOL IsFirstInGroup() const;
```

### <a name="return-value"></a>返回值

如果该按钮在其按钮组; 第一个按钮，则返回 TRUE否则为 FALSE。

### <a name="remarks"></a>备注

此方法定义*按钮组*为一组相邻的按钮，在同一行上定位并受分隔符或工具栏的边框。 此方法返回 FALSE，如果工具栏按钮是指**自定义**按钮。 有关详细信息**自定义**按钮，请参阅[CMFCToolBar::GetCustomizeButton](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton)。

调用[CMFCToolBarButton::IsLastInGroup](#islastingroup)方法来确定的按钮是否在其按钮组中的最后一个位置中。

##  <a name="ishidden"></a>  CMFCToolBarButton::IsHidden

确定按钮处于隐藏状态。

```
BOOL IsHidden() const;
```

### <a name="return-value"></a>返回值

如果按钮处于隐藏状态 （不可见）; 非零值否则为 0。

### <a name="remarks"></a>备注

框架调用此方法时在父级工具栏拉伸以确定工具栏按钮是否可见。

如果设置通过使用不可见的按钮[CMFCToolBarButton::SetVisible](#setvisible)方法，请使用[CMFCToolBarButton::IsVisible](#isvisible)以确定工具栏按钮是否可见。

默认情况下，所有的工具栏按钮是可见的。 使用[CMFCToolBarButton::Show](#show)方法来隐藏或显示工具栏按钮。

##  <a name="ishorizontal"></a>  CMFCToolBarButton::IsHorizontal

确定是否将该按钮位于水平工具栏上。

```
BOOL IsHorizontal() const;
```

### <a name="return-value"></a>返回值

如果工具栏按钮位于水平工具栏; 非零值否则为 0。

### <a name="remarks"></a>备注

框架调用此方法以确定工具栏按钮的布局。

此方法返回`m_bHorz`数据成员。 默认值`m_bHorz`数据成员为 TRUE; 每次调用重置[CMFCToolBarButton::OnDraw](#ondraw)方法。

##  <a name="islastingroup"></a>  CMFCToolBarButton::IsLastInGroup

指定的按钮是否在其按钮组中的最后一个位置中。

```
virtual BOOL IsLastInGroup() const;
```

### <a name="return-value"></a>返回值

如果该按钮在其按钮组; 最后一个按钮，则返回 TRUE否则为 FALSE。

### <a name="remarks"></a>备注

此方法定义*按钮组*相邻组按钮，定位在该行上并受分隔符或工具栏的边框作为此方法返回 FALSE，工具栏按钮是否不在父级工具栏或工具栏按钮是指**自定义**按钮。 有关详细信息**自定义**按钮，请参阅[CMFCToolBar::GetCustomizeButton](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton)。

调用[CMFCToolBarButton::IsFirstInGroup](#isfirstingroup)方法来确定的按钮是否在其按钮组中的第一个位置。

##  <a name="islocked"></a>  CMFCToolBarButton::IsLocked

确定是否已启用锁定的 （非可自定义） 工具栏的按钮。

```
BOOL IsLocked() const;
```

### <a name="return-value"></a>返回值

如果该按钮锁定工具栏; 上的非零否则为 0。

### <a name="remarks"></a>备注

框架调用此方法以确定用户是否可以通过使用拖放自定义工具栏按钮或编辑操作。 通过使用在父级工具栏上设置锁定的特性[CMFCToolBar::LoadToolBar](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar)方法。 该框架将此属性的值传递给每个工具栏按钮的构造函数 ( [CMFCToolbarButton](../../mfc/reference/cmfctoolbarbutton-class.md))，它将插入到在父级工具栏。

##  <a name="isownerof"></a>  CMFCToolBarButton::IsOwnerOf

确定按钮是否为提供的窗口句柄的所有者。

```
virtual BOOL IsOwnerOf(HWND hwnd);
```

### <a name="parameters"></a>参数

*hwnd*<br/>
[in]窗口句柄。

### <a name="return-value"></a>返回值

如果该按钮提供的窗口句柄; 的所有者，非零值否则为 0。

### <a name="remarks"></a>备注

此方法返回非零 if *hwnd*直接的窗口句柄是指或是与按钮关联的窗口句柄的子级。 如果此方法返回 0 *hwnd*为 NULL。

##  <a name="isvisible"></a>  CMFCToolBarButton::IsVisible

确定工具栏按钮是否可见。

```
BOOL IsVisible() const;
```

### <a name="return-value"></a>返回值

如果工具栏按钮是否可见，则非零值否则为 0。

### <a name="remarks"></a>备注

您可以显示或隐藏工具栏按钮通过使用[CMFCToolBarButton::SetVisible](#setvisible)方法。 调用[CPane::AdjustSizeImmediate](../../mfc/reference/cpane-class.md#adjustsizeimmediate)方法调用后，在父级工具栏[CMFCToolBarButton::SetVisible](#setvisible)重新计算在父级工具栏的布局。

##  <a name="iswindowvisible"></a>  CMFCToolBarButton::IsWindowVisible

确定基础窗口句柄的按钮是否可见。

```
virtual BOOL IsWindowVisible();
```

### <a name="return-value"></a>返回值

如果按钮的基础窗口句柄为可见，则非零值否则为 0。

### <a name="remarks"></a>备注

此方法返回非零，如果基础窗口句柄的样式属性包含 WS_VISIBLE 样式。 如果按钮的基础窗口句柄为 NULL，则此方法返回 FALSE。

##  <a name="m_bimage"></a>  CMFCToolBarButton::m_bImage

指定是否在按钮上显示图像。

```
BOOL m_bImage;
```

### <a name="remarks"></a>备注

如果此数据成员设置为 TRUE，框架将显示与工具栏按钮; 关联的图像否则框架无法显示的图像。 此成员会影响的返回值[CMFCToolBarButton::m_bImage](#m_bimage)方法。

##  <a name="m_btext"></a>  CMFCToolBarButton::m_bText

指定是否在按钮上显示的文本标签。

```
BOOL m_bText;
```

### <a name="remarks"></a>备注

如果此数据成员设置为 TRUE，框架将显示工具栏按钮; 的文本标签否则该框架不显示的文本标签。 此成员会影响的返回值[CMFCToolBarButton::m_bText](#m_btext)方法。

##  <a name="m_btextbelow"></a>  CMFCToolBarButton::m_bTextBelow

指定是否下方的按钮的图像显示的文本标签。

```
BOOL m_bTextBelow;
```

### <a name="remarks"></a>备注

如果此成员变量设置为 TRUE，框架将显示到该图像下面的按钮的文本。 此成员的默认值为 FALSE。

##  <a name="m_buserbutton"></a>  CMFCToolBarButton::m_bUserButton

指定该按钮是否具有用户定义的图像

```
BOOL m_bUserButton;
```

### <a name="remarks"></a>备注

此数据成员设置为 TRUE 时该按钮具有与之关联的用户定义的映像。

##  <a name="m_bwholetext"></a>  CMFCToolBarButton::m_bWholeText

指定即使无法容纳在边框中的按钮是否显示其完整文本标签。

```
BOOL m_bWholeText;
```

### <a name="remarks"></a>备注

如果此数据成员设置为 TRUE，框架通过扩大该按钮显示的完整文本标签。 否则为框架将截断并追加一个省略号 ( **...**) 到的文本标签。

##  <a name="m_bwrap"></a>  CMFCToolBarButton::m_bWrap

指定是否将在下一行中放置分隔符旁边的按钮。

```
BOOL m_bWrap;
```

### <a name="remarks"></a>备注

工具栏按钮不适合当前行上或指定的布局 （例如，特定的工具栏按钮，每个行数） 时，框架会将此数据成员设置为 TRUE。

如果此数据成员设置为 TRUE 并且工具栏处于水平停靠或浮动状态，框架将在下一行上放置此按钮。

此数据成员的默认值为 FALSE。

##  <a name="m_bwraptext"></a>  CMFCToolBarButton::m_bWrapText

指定是否启用多行文本标签。

```
AFX_IMPORT_DATA static BOOL m_bWrapText;
```

### <a name="remarks"></a>备注

如果此静态成员变量为 TRUE，框架将使所有的工具栏，工具栏按钮上显示多行文本标签。

此数据成员的默认值为 FALSE。

##  <a name="m_nid"></a>  CMFCToolBarButton::m_nID

按钮的命令 ID。

```
UINT m_nID;
```

### <a name="remarks"></a>备注

命令 ID 为-1 指示该按钮是一个分隔符。 所有按钮分隔符都有 TBBS_SEPARATOR 样式。 请参阅[CMFCToolBarButton::m_nStyle](#m_nstyle)有关按钮样式的详细信息。

##  <a name="m_nstyle"></a>  CMFCToolBarButton::m_nStyle

按钮的样式。

```
UINT m_nStyle;
```

### <a name="remarks"></a>备注

请参阅[工具栏控件样式](../../mfc/reference/toolbar-control-styles.md)可用工具栏按钮样式的列表。

##  <a name="m_strtext"></a>  CMFCToolBarButton::m_strText

按钮的文本标签。

```
CString m_strText;
```

### <a name="remarks"></a>备注

此数据成员包含按钮的文本标签。 文本标签能为空。

##  <a name="notifycommand"></a>  CMFCToolBarButton::NotifyCommand

指定是否处理按钮[WM_COMMAND](/windows/desktop/menurc/wm-command)消息。

```
virtual BOOL NotifyCommand(int iNotifyCode);
```

### <a name="parameters"></a>参数

*iNotifyCode*<br/>
[in]与命令相关联的通知消息。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

框架调用此方法时将要发送[WM_COMMAND](/windows/desktop/menurc/wm-command)向父窗口的消息。

默认情况下，此方法返回 FALSE。 重写此方法以返回 TRUE，如果你想要处理 WM_COMMAND 消息或 FALSE 以指示在父级工具栏应处理消息。

##  <a name="onaddtocustomizepage"></a>  CMFCToolBarButton::OnAddToCustomizePage

由框架调用时该按钮添加到**自定义**对话框。

```
virtual void OnAddToCustomizePage();
```

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法，如果你想要执行某些操作时该按钮添加到**自定义**对话框。

##  <a name="onbeforedrag"></a>  CMFCToolBarButton::OnBeforeDrag

指定是否可以拖动按钮。

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>返回值

如果可以拖动按钮; 则为 TRUE否则为 FALSE。

### <a name="remarks"></a>备注

用户开始拖动按钮之前，框架将调用此方法。

此方法的默认实现，则返回 TRUE。 重写此方法将返回 FALSE 来禁用的按钮拖动。

##  <a name="onbeforedrop"></a>  CMFCToolBarButton::OnBeforeDrop

指定用户是否可以删除到目标工具栏上的按钮。

```
virtual BOOL OnBeforeDrop(CMFCToolBar* pTarget);
```

### <a name="parameters"></a>参数

*pTarget*<br/>
[in]拖放操作的目标。

### <a name="return-value"></a>返回值

如果该按钮可以放置到提供的目标工具栏; 则为 TRUE否则为 FALSE。

### <a name="remarks"></a>备注

框架调用此方法前按钮放置到工具栏上。

此方法的默认实现，则返回 TRUE。 重写此方法将返回 FALSE 来禁用对指定目标拖放操作。

##  <a name="oncalculatesize"></a>  CMFCToolBarButton::OnCalculateSize

由框架调用以计算指定的设备上下文和停靠状态的按钮的大小。

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>参数

*pDC*<br/>
[in]所显示的按钮的设备上下文。

*sizeDefault*<br/>
[in]按钮的默认大小。

*bHorz*<br/>
[in]在父级工具栏停靠状态。 如果垂直停靠工具栏，此参数是工具栏时水平停靠或浮动时，如果为 TRUE 或 FALSE。

### <a name="return-value"></a>返回值

一个`SIZE`包含按钮，以像素为单位的维度的结构。

### <a name="remarks"></a>备注

框架调用此方法以确定指定的设备上下文的工具栏按钮的大小和停靠状态。

默认实现会考虑的文本和图像的大小 （如果显示）、 文本和图像的位置 （文本低于或等于右侧的图像） 和工具栏停靠状态。

如果你想要提供非标准按钮 （例如，一个编辑框按钮） 的大小，重写此方法。

##  <a name="oncancelmode"></a>  CMFCToolBarButton::OnCancelMode

由框架调用以处理[WM_CANCELMODE](/windows/desktop/winmsg/wm-cancelmode)消息。

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法，如果你想要处理[WM_CANCELMODE](/windows/desktop/winmsg/wm-cancelmode)消息。

##  <a name="onchangeparentwnd"></a>  CMFCToolBarButton::OnChangeParentWnd

按钮插入到一个新的工具栏中时由框架调用。

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>参数

*pWndParent*<br/>
[in]新的父窗口。

### <a name="remarks"></a>备注

该按钮将插入到一个工具栏，例如，当用户拖动它从一个工具栏到另一个工具栏。

此方法的默认实现没有任何影响。

##  <a name="onclick"></a>  CMFCToolBarButton::OnClick

当用户单击鼠标按钮时由框架调用。

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay=TRUE);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
[in]父窗口的工具栏按钮。

*bDelay*<br/>
[in]如果该消息应处理一定的延迟，则为 TRUE。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

当用户单击工具栏按钮时，框架将调用此方法。

默认实现不执行任何操作，并返回 FALSE。 重写此方法以返回一个非零值，如果该按钮处理单击消息。

##  <a name="onclickup"></a>  CMFCToolBarButton::OnClickUp

当用户释放鼠标按钮时由框架调用。

```
virtual BOOL OnClickUp();
```

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

当用户释放工具栏按钮时，框架将调用此方法。

默认实现不执行任何操作，并返回 FALSE。 重写此方法以返回一个非零值，如果该按钮处理单击消息。

##  <a name="oncontexthelp"></a>  CMFCToolBarButton::OnContextHelp

当在父级工具栏处理 WM_HELPHITTEST 消息时由框架调用。

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
[in]父窗口的工具栏按钮。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作，返回 FALSE。 重写此方法以返回一个非零值，如果该按钮处理此帮助消息。

WM_HELPHITTEST 消息有关的详细信息，请参阅[TN028:上下文相关帮助支持](../../mfc/tn028-context-sensitive-help-support.md)。

##  <a name="onctlcolor"></a>  CMFCToolBarButton::OnCtlColor

当在父级工具栏处理 WM_CTLCOLOR 消息时由框架调用。

```
virtual HBRUSH OnCtlColor(
    CDC* pDC,
    UINT nCtlColor);
```

### <a name="parameters"></a>参数

*pDC*<br/>
[in]所显示的按钮的设备上下文。

*nCtlColor*<br/>
[in]特定颜色通知中。

### <a name="return-value"></a>返回值

Framework 用来绘制按钮的背景画笔对象的句柄。

### <a name="remarks"></a>备注

当在父级工具栏处理包含 Windows 控件的工具栏按钮的 WM_CTLCOLOR 消息时，框架将调用此方法。 框架不会调用此方法，如果是无窗口的工具栏按钮。

工具栏框架是在自定义模式和工具栏按钮处于解锁状态时，框架将调用此方法。 有关自定义模式的详细信息，请参阅[CMFCToolBar::SetCustomizeMode](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode)。 锁定工具栏按钮的详细信息，请参阅[CMFCToolBarButton::IsLocked](#islocked)。

默认实现不执行任何操作，并返回 NULL。

##  <a name="oncustomizemenu"></a>  CMFCToolBarButton::OnCustomizeMenu

允许修改提供的菜单时应用程序将显示在父级工具栏上的快捷菜单的按钮。

```
virtual BOOL OnCustomizeMenu(CMenu* pMenu);
```

### <a name="parameters"></a>参数

*pMenu*<br/>
[in]要自定义的菜单。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

默认实现不执行任何操作，并返回 FALSE。 重写此方法并返回一个非零值，如果你想要修改提供的菜单的内容。

##  <a name="ondblclk"></a>  CMFCToolBarButton::OnDblClk

当在父级工具栏处理时由框架调用[需知道 WM_LBUTTONDBLCLK](/windows/desktop/inputdev/wm-lbuttondblclk)消息。

```
virtual void OnDblClk(CWnd* pWnd);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
[in] 的按钮的父窗口。

### <a name="remarks"></a>备注

调用此方法`CMFCToolBar::OnLButtonDblClk`方法时在父级工具栏处理[需知道 WM_LBUTTONDBLCLK](/windows/desktop/inputdev/wm-lbuttondblclk)消息。

此方法的默认实现没有任何影响。

##  <a name="ondraw"></a>  CMFCToolBarButton::OnDraw

由框架调用以绘制按钮通过使用指定的样式和选项。

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz=TRUE,
    BOOL bCustomizeMode=FALSE,
    BOOL bHighlight=FALSE,
    BOOL bDrawBorder=TRUE,
    BOOL bGrayDisabledButtons=TRUE);
```

### <a name="parameters"></a>参数

*pDC*<br/>
[in]所显示的按钮的设备上下文。

*rect*<br/>
[in]按钮的边框。

*pImages*<br/>
[in]是与按钮关联的工具栏图像集合。

*bHorz*<br/>
[in]在父级工具栏停靠状态。 按钮停靠时 FALSE 水平和垂直停靠按钮时，此参数为 TRUE。

*bCustomizeMode*<br/>
[in]指定工具栏是否在自定义模式。 此参数为 TRUE 时工具栏不为自定义模式时，工具栏是在自定义模式和 FALSE。

*bHighlight*<br/>
[in]指定按钮将突出显示。 此参数是如果按钮突出显示，则 TRUE 和 FALSE 时不突出显示按钮。

*bDrawBorder*<br/>
[in]指定按钮是否应显示其边框。 此参数为 TRUE 时该按钮应显示其边框和 FALSE 时不应显示其边框的按钮。

*bGrayDisabledButtons*<br/>
[in]指定是否添加阴影禁用的按钮或使用已禁用的图像集合。 禁用的按钮应为灰色并且 FALSE，此方法应使用已禁用的图像集合时，此参数为 TRUE。

### <a name="remarks"></a>备注

重写此方法以自定义工具栏按钮绘制。

##  <a name="ondrawoncustomizelist"></a>  CMFCToolBarButton::OnDrawOnCustomizeList

由框架调用以将按钮画入**命令**窗格**自定义**对话框。

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>参数

*pDC*<br/>
[in]所显示的按钮的设备上下文。

*rect*<br/>
[in]按钮的边框。

*bSelected*<br/>
[in]指定按钮处于选中状态。 如果此参数为 TRUE，按钮被选定。 如果此参数为 FALSE，则不选择按钮。

### <a name="return-value"></a>返回值

以像素为单位，指定的设备上下文上的按钮的宽度。

### <a name="remarks"></a>备注

自定义对话框中调用此方法 (**命令**选项卡) 按钮时要显示在所有者描述列表框本身。

如果可用，此方法的默认实现将显示按钮的图像和文本标签。 如果按钮的文本标签不可用，该方法将显示工具提示文本。

重写此方法以执行自定义绘图。

##  <a name="ongetcustomtooltiptext"></a>  CMFCToolBarButton::OnGetCustomToolTipText

由框架调用以检索按钮的自定义工具提示文本。

```
virtual BOOL OnGetCustomToolTipText(CString& strToolTip);
```

### <a name="parameters"></a>参数

*strToolTip*<br/>
[out]一个`CString`对象，它接收的自定义工具提示文本。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

显示工具栏按钮的工具提示时，框架将调用此方法。 如果此方法返回 FALSE，框架将使用默认工具提示。

默认实现不执行任何操作，并返回 FALSE。 重写此方法并返回非零值为工具栏按钮提供自定义工具提示文本。

##  <a name="onglobalfontschanged"></a>  CMFCToolBarButton::OnGlobalFontsChanged

全局字体发生更改时由框架调用。

```
virtual void OnGlobalFontsChanged();
```

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法以更新用于显示的按钮文本的字体。

##  <a name="onmove"></a>  CMFCToolBarButton::OnMove

当在父级工具栏移动时由框架调用。

```
virtual void OnMove();
```

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法以在父级工具栏移动时重新定位按钮。

##  <a name="onshow"></a>  CMFCToolBarButton::OnShow

由框架调用时该按钮即变为可见或不可见。

```
virtual void OnShow(BOOL bShow);
```

### <a name="parameters"></a>参数

*bShow*<br/>
[in]指定的按钮是否可见。 如果此参数为 TRUE，则按钮可见。 否则，该按钮不可见。

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法以更新按钮的可见性。

##  <a name="onsize"></a>  CMFCToolBarButton::OnSize

在父级工具栏更改其大小或位置和此更改会导致该按钮将大小更改时由框架调用。

```
virtual void OnSize(int iSize);
```

### <a name="parameters"></a>参数

*iSize*<br/>
[in]新按钮的宽度。

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法以调整按钮大小的大小或在父级工具栏的位置发生更改时。

##  <a name="ontoolhittest"></a>  CMFCToolBarButton::OnToolHitTest

当在父级工具栏必须确定一个点是按钮的边框内时由框架调用。

```
virtual BOOL OnToolHitTest(
    const CWnd* pWnd,
    TOOLINFO* pTI);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
[in]按钮的父窗口。 可以为 NULL。

*pTI*<br/>
[in]一个`TOOLINFO`结构，其中包含有关在工具提示控件中工具的信息。

### <a name="return-value"></a>返回值

结果`OnMenuButtonToolHitTest`如果按钮可以检索一个指向父框架窗口; 否则为 FALSE。

### <a name="remarks"></a>备注

如果它可以转换为有效帧对象的父窗口，此方法将调用以下方法之一：

- [CMDIFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/cmdiframewndex-class.md#onmenubuttontoolhittest)

- [CFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/cframewndex-class.md#onmenubuttontoolhittest)

- [COleIPFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/coleipframewndex-class.md#onmenubuttontoolhittest)

##  <a name="onupdatetooltip"></a>  CMFCToolBarButton::OnUpdateToolTip

在父级工具栏更新其工具提示文本时由框架调用。

```
virtual BOOL OnUpdateToolTip(
    CWnd* pWndParent,
    int iButtonIndex,
    CToolTipCtrl& wndToolTip,
    CString& str);
```

### <a name="parameters"></a>参数

*pWndParent*<br/>
[in]父窗口中。

*iButtonIndex*<br/>
[in]父按钮集合中按钮的从零开始的索引。

*wndToolTip*<br/>
[in]显示工具提示文本的控件。

*str*<br/>
[out]一个`CString`对象，它接收的已更新的工具提示文本。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作，返回 FALSE。 重写此方法以返回一个非零值，如果你提供的工具提示文本字符串。

##  <a name="preparedrag"></a>  CMFCToolBarButton::PrepareDrag

当该按钮要执行拖放操作时由框架调用。

```
virtual BOOL PrepareDrag(COleDataSource& srcItem);
```

### <a name="parameters"></a>参数

*srcItem*<br/>
[in]一个`COleDataSource`对象，它存储有关拖放操作的状态信息。

### <a name="return-value"></a>返回值

如果操作成功，则为 TRUE否则为 FALSE。

### <a name="remarks"></a>备注

框架调用此方法以准备工具栏按钮以将其状态存储在所提供`COleDataSource`对象。 此方法将其状态存储自身序列化为共享文件，然后将传递到该文件由[COleDataSource::CacheGlobalData](../../mfc/reference/coledatasource-class.md#cacheglobaldata)方法。 有关工具栏按钮序列化的详细信息，请参阅[CMFCToolBarButton::Serialize](#serialize)。

此方法不执行任何操作，如果不能存储按钮，则返回 TRUE ( [CMFCToolBarButton::CanBeStored](#canbestored)方法返回 FALSE)。 如果对象序列化过程中发生异常，则返回 FALSE。

OLE 拖放操作的详细信息，请参阅[拖放 (OLE)](../../mfc/drag-and-drop-ole.md)。

##  <a name="rect"></a>  CMFCToolBarButton::Rect

检索按钮的边框。

```
const CRect& Rect() const;
```

### <a name="return-value"></a>返回值

一个`CRect`对象，其中包含一个按钮的边框。

##  <a name="resetimagetodefault"></a>  CMFCToolBarButton::ResetImageToDefault

设置为默认值是与按钮关联的图像。

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>备注

此方法可检索其父工具栏使用的默认图像[CMFCToolBar::GetDefaultImage](../../mfc/reference/cmfctoolbar-class.md#getdefaultimage)方法。 如果该按钮不具有任何关联的默认图像，此方法通过设置其字符串资源根据按钮的文本标签[CStringT::LoadString](../../atl-mfc-shared/reference/cstringt-class.md#loadstring)方法。 有关字符串资源的详细信息，请参阅[Working with Resource Files](../../windows/working-with-resource-files.md)。

如果该按钮具有用户定义的映像，则此方法没有任何影响。

##  <a name="savebarstate"></a>  CMFCToolBarButton::SaveBarState

保存的工具栏按钮的状态。

```
virtual void SaveBarState();
```

### <a name="remarks"></a>备注

框架调用此方法创建时`CMFCToolBarButton`对象作为拖放操作的结果。

此方法的默认实现没有任何影响。 重写此方法将工具栏按钮的状态保存到外部数据源。

##  <a name="serialize"></a>  CMFCToolBarButton::Serialize

从存档读取此对象或将其写入到存档。

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>参数

*ar*<br/>
[in]`CArchive`从中或向其进行序列化的对象。

### <a name="remarks"></a>备注

此方法支持数据传输流程，如剪贴板或拖放操作。 它读取或写入如 ID、 文本标签和映像 ID 按钮的属性来自或发往所提供`CArchive`对象。

有关序列化示例，请参阅[序列化：将对象序列化为](../../mfc/serialization-serializing-an-object.md)。

##  <a name="setaccdata"></a>  CMFCToolBarButton::SetACCData

填充所提供`CAccessibilityData`对象从工具栏按钮可访问性数据。

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>参数

*pParent*<br/>
[in]父窗口的工具栏按钮。

*data*<br/>
[in]一个`CAccessibilityData`使用工具栏按钮可访问性数据填充的对象。

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

重写此方法将返回 FALSE，如果你的工具栏按钮不提供可访问性数据。

##  <a name="setclipboardformatname"></a>  CMFCToolBarButton::SetClipboardFormatName

重命名的全局剪贴板格式。

```
static void __stdcall SetClipboardFormatName(LPCTSTR lpszName);
```

### <a name="parameters"></a>参数

*lpszName*<br/>
[in]全局剪贴板格式的新名称。 不能为 NULL。

### <a name="remarks"></a>备注

此方法可以在多个应用程序之间发生的拖放操作。 每个应用程序必须提供相同的剪贴板格式名称。

必须调用此方法之前框架将调用[CMFCToolBarButton::GetClipboardFormat](#getclipboardformat)。

##  <a name="setimage"></a>  CMFCToolBarButton::SetImage

设置按钮的图像索引。

```
virtual void SetImage(int iImage);
```

### <a name="parameters"></a>参数

*iImage*<br/>
[in]集合中的工具栏图像的图像的索引。

### <a name="remarks"></a>备注

如果工具栏按钮是一个分隔符*iImage*指分隔符按钮的新宽度。

如果*iImage*小于零，此方法禁用绘制图像，并且使该按钮的文本标签的绘制。

##  <a name="setprotectedcommands"></a>  CMFCToolBarButton::SetProtectedCommands

设置的用户不能自定义的命令的列表。

```
static void SetProtectedCommands(const CList<UINT,UINT>& lstCmds);
```

### <a name="parameters"></a>参数

*lstCmds*<br/>
[in]受保护的命令的列表。

### <a name="remarks"></a>备注

在自定义模式下，框架会禁用受保护的工具栏按钮命令。 用户不能执行拖放和编辑已禁用的工具栏按钮上的操作。

使用[CMFCToolBarButton::GetProtectedCommands](#getprotectedcommands)方法来检索列表的受保护的命令。

##  <a name="setradio"></a>  CMFCToolBarButton::SetRadio

一个按钮更改其选中的状态时，由框架调用。

```
virtual void SetRadio();
```

### <a name="remarks"></a>备注

此方法的默认实现没有任何影响。 重写此方法以执行自定义操作时该按钮将更改的选中的状态。

##  <a name="setrect"></a>  CMFCToolBarButton::SetRect

设置按钮的边框。

```
void SetRect(const CRect rect);
```

### <a name="parameters"></a>参数

*rect*<br/>
[in]新按钮的边框。

### <a name="remarks"></a>备注

此方法调用[CMFCToolBarButton::OnMove](#onmove)方法后设置新边框。

##  <a name="setstyle"></a>  CMFCToolBarButton::SetStyle

设置按钮的样式。

```
virtual void SetStyle(UINT nStyle);
```

### <a name="parameters"></a>参数

*nStyle*<br/>
[in]新的按钮样式。

### <a name="remarks"></a>备注

默认实现集[CMFCToolBarButton::m_nStyle](#m_nstyle)数据成员添加到*nStyle*。 如果你想要执行其他处理，以处理在样式中的更改重写此方法。 请参阅[工具栏控件样式](toolbar-control-styles.md)有关有效的样式标志的列表。

##  <a name="setvisible"></a>  CMFCToolBarButton::SetVisible

指定的按钮是否可见。

```
void SetVisible(BOOL bShow=TRUE);
```

### <a name="parameters"></a>参数

*bShow*<br/>
[in]一个布尔值，该值指定是否显示或隐藏按钮。 如果此参数为 TRUE，则会显示按钮。 如果参数为 FALSE，则按钮处于隐藏状态。

### <a name="remarks"></a>备注

此函数用于隐藏或显示的特定工具栏按钮。 调用[CPane::AdjustSizeImmediate](../../mfc/reference/cpane-class.md#adjustsizeimmediate)方法后调用此方法。

##  <a name="show"></a>  CMFCToolBarButton::Show

显示或隐藏按钮。

```
void Show(BOOL bShow);
```

### <a name="parameters"></a>参数

*bShow*<br/>
[in]一个布尔值，该值指定是否显示或隐藏按钮。 如果此参数为 TRUE，则会显示按钮。 如果参数为 FALSE，则按钮处于隐藏状态。

### <a name="remarks"></a>备注

框架调用此方法以调整其在父级工具栏时更新工具栏按钮的可见性。 框架将调用此方法替换*bShow*按钮不能被装入工具栏的边界内时，设置为 FALSE。 框架将调用此方法替换*bShow*后再次调整按钮处于的范围内的工具栏边界设置为 TRUE。

使用[CMFCToolBarButton::SetVisible](#setvisible)方法以设置常规按钮的可见性。

此方法调用[CMFCToolBarButton::OnShow](#onshow)方法后它会更新该按钮的可见性状态。

## <a name="see-also"></a>请参阅

[层次结构图](../../mfc/hierarchy-chart.md)<br/>
[类](../../mfc/reference/mfc-classes.md)<br/>
[CMFCToolBar 类](../../mfc/reference/cmfctoolbar-class.md)<br/>
[CMFCToolBarImages 类](../../mfc/reference/cmfctoolbarimages-class.md)
