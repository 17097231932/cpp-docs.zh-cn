---
title: CMFCPopupMenu 类
ms.date: 10/18/2018
f1_keywords:
- CMFCPopupMenu
- AFXPOPUPMENU/CMFCPopupMenu
- AFXPOPUPMENU/CMFCPopupMenu::CMFCPopupMenu
- AFXPOPUPMENU/CMFCPopupMenu::ActivatePopupMenu
- AFXPOPUPMENU/CMFCPopupMenu::AlwaysShowEmptyToolsEntry
- AFXPOPUPMENU/CMFCPopupMenu::AreAllCommandsShown
- AFXPOPUPMENU/CMFCPopupMenu::CheckArea
- AFXPOPUPMENU/CMFCPopupMenu::CloseMenu
- AFXPOPUPMENU/CMFCPopupMenu::Create
- AFXPOPUPMENU/CMFCPopupMenu::DefaultMouseClickOnClose
- AFXPOPUPMENU/CMFCPopupMenu::EnableMenuLogo
- AFXPOPUPMENU/CMFCPopupMenu::EnableMenuSound
- AFXPOPUPMENU/CMFCPopupMenu::EnableResize
- AFXPOPUPMENU/CMFCPopupMenu::EnableScrolling
- AFXPOPUPMENU/CMFCPopupMenu::EnableVertResize
- AFXPOPUPMENU/CMFCPopupMenu::FindSubItemByCommand
- AFXPOPUPMENU/CMFCPopupMenu::GetActiveMenu
- AFXPOPUPMENU/CMFCPopupMenu::GetAnimationSpeed
- AFXPOPUPMENU/CMFCPopupMenu::GetAnimationType
- AFXPOPUPMENU/CMFCPopupMenu::GetDropDirection
- AFXPOPUPMENU/CMFCPopupMenu::GetForceMenuFocus
- AFXPOPUPMENU/CMFCPopupMenu::GetForceShadow
- AFXPOPUPMENU/CMFCPopupMenu::GetHMenu
- AFXPOPUPMENU/CMFCPopupMenu::GetMenuBar
- AFXPOPUPMENU/CMFCPopupMenu::GetMenuItem
- AFXPOPUPMENU/CMFCPopupMenu::GetMenuItemCount
- AFXPOPUPMENU/CMFCPopupMenu::GetMessageWnd
- AFXPOPUPMENU/CMFCPopupMenu::GetParentArea
- AFXPOPUPMENU/CMFCPopupMenu::GetParentButton
- AFXPOPUPMENU/CMFCPopupMenu::GetParentPopupMenu
- AFXPOPUPMENU/CMFCPopupMenu::GetParentRibbonElement
- AFXPOPUPMENU/CMFCPopupMenu::GetParentToolBar
- AFXPOPUPMENU/CMFCPopupMenu::GetQuickCustomizeType
- AFXPOPUPMENU/CMFCPopupMenu::GetSelItem
- AFXPOPUPMENU/CMFCPopupMenu::HasBeenResized
- AFXPOPUPMENU/CMFCPopupMenu::HideRarelyUsedCommands
- AFXPOPUPMENU/CMFCPopupMenu::InCommand
- AFXPOPUPMENU/CMFCPopupMenu::InsertItem
- AFXPOPUPMENU/CMFCPopupMenu::InsertSeparator
- AFXPOPUPMENU/CMFCPopupMenu::IsAlwaysClose
- AFXPOPUPMENU/CMFCPopupMenu::IsAlwaysShowEmptyToolsEntry
- AFXPOPUPMENU/CMFCPopupMenu::IsCustomizePane
- AFXPOPUPMENU/CMFCPopupMenu::IsEscClose
- AFXPOPUPMENU/CMFCPopupMenu::IsIdle
- AFXPOPUPMENU/CMFCPopupMenu::IsMenuSound
- AFXPOPUPMENU/CMFCPopupMenu::IsQuickCustomize
- AFXPOPUPMENU/CMFCPopupMenu::IsResizeble
- AFXPOPUPMENU/CMFCPopupMenu::IsRightAlign
- AFXPOPUPMENU/CMFCPopupMenu::IsScrollable
- AFXPOPUPMENU/CMFCPopupMenu::IsSendMenuSelectMsg
- AFXPOPUPMENU/CMFCPopupMenu::IsShown
- AFXPOPUPMENU/CMFCPopupMenu::MoveTo
- AFXPOPUPMENU/CMFCPopupMenu::OnCmdMsg
- AFXPOPUPMENU/CMFCPopupMenu::PostCommand
- AFXPOPUPMENU/CMFCPopupMenu::PreTranslateMessage
- AFXPOPUPMENU/CMFCPopupMenu::RecalcLayout
- AFXPOPUPMENU/CMFCPopupMenu::RemoveAllItems
- AFXPOPUPMENU/CMFCPopupMenu::RemoveItem
- AFXPOPUPMENU/CMFCPopupMenu::SaveState
- AFXPOPUPMENU/CMFCPopupMenu::SetAnimationSpeed
- AFXPOPUPMENU/CMFCPopupMenu::SetAnimationType
- AFXPOPUPMENU/CMFCPopupMenu::SetAutoDestroy
- AFXPOPUPMENU/CMFCPopupMenu::SetDefaultItem
- AFXPOPUPMENU/CMFCPopupMenu::SetForceMenuFocus
- AFXPOPUPMENU/CMFCPopupMenu::SetForceShadow
- AFXPOPUPMENU/CMFCPopupMenu::SetMaxWidth
- AFXPOPUPMENU/CMFCPopupMenu::SetMessageWnd
- AFXPOPUPMENU/CMFCPopupMenu::SetParentRibbonElement
- AFXPOPUPMENU/CMFCPopupMenu::SetQuickCustomizeType
- AFXPOPUPMENU/CMFCPopupMenu::SetQuickMode
- AFXPOPUPMENU/CMFCPopupMenu::SetRightAlign
- AFXPOPUPMENU/CMFCPopupMenu::SetSendMenuSelectMsg
- AFXPOPUPMENU/CMFCPopupMenu::ShowAllCommands
- AFXPOPUPMENU/CMFCPopupMenu::TriggerResize
- AFXPOPUPMENU/CMFCPopupMenu::UpdateAllShadows
- AFXPOPUPMENU/CMFCPopupMenu::UpdateShadow
- AFXPOPUPMENU/CMFCPopupMenu::CreateTearOffBar
- AFXPOPUPMENU/CMFCPopupMenu::OnChangeHot
- AFXPOPUPMENU/CMFCPopupMenu::OnChooseItem
helpviewer_keywords:
- CMFCPopupMenu [MFC], CMFCPopupMenu
- CMFCPopupMenu [MFC], ActivatePopupMenu
- CMFCPopupMenu [MFC], AlwaysShowEmptyToolsEntry
- CMFCPopupMenu [MFC], AreAllCommandsShown
- CMFCPopupMenu [MFC], CheckArea
- CMFCPopupMenu [MFC], CloseMenu
- CMFCPopupMenu [MFC], Create
- CMFCPopupMenu [MFC], DefaultMouseClickOnClose
- CMFCPopupMenu [MFC], EnableMenuLogo
- CMFCPopupMenu [MFC], EnableMenuSound
- CMFCPopupMenu [MFC], EnableResize
- CMFCPopupMenu [MFC], EnableScrolling
- CMFCPopupMenu [MFC], EnableVertResize
- CMFCPopupMenu [MFC], FindSubItemByCommand
- CMFCPopupMenu [MFC], GetActiveMenu
- CMFCPopupMenu [MFC], GetAnimationSpeed
- CMFCPopupMenu [MFC], GetAnimationType
- CMFCPopupMenu [MFC], GetDropDirection
- CMFCPopupMenu [MFC], GetForceMenuFocus
- CMFCPopupMenu [MFC], GetForceShadow
- CMFCPopupMenu [MFC], GetHMenu
- CMFCPopupMenu [MFC], GetMenuBar
- CMFCPopupMenu [MFC], GetMenuItem
- CMFCPopupMenu [MFC], GetMenuItemCount
- CMFCPopupMenu [MFC], GetMessageWnd
- CMFCPopupMenu [MFC], GetParentArea
- CMFCPopupMenu [MFC], GetParentButton
- CMFCPopupMenu [MFC], GetParentPopupMenu
- CMFCPopupMenu [MFC], GetParentRibbonElement
- CMFCPopupMenu [MFC], GetParentToolBar
- CMFCPopupMenu [MFC], GetQuickCustomizeType
- CMFCPopupMenu [MFC], GetSelItem
- CMFCPopupMenu [MFC], HasBeenResized
- CMFCPopupMenu [MFC], HideRarelyUsedCommands
- CMFCPopupMenu [MFC], InCommand
- CMFCPopupMenu [MFC], InsertItem
- CMFCPopupMenu [MFC], InsertSeparator
- CMFCPopupMenu [MFC], IsAlwaysClose
- CMFCPopupMenu [MFC], IsAlwaysShowEmptyToolsEntry
- CMFCPopupMenu [MFC], IsCustomizePane
- CMFCPopupMenu [MFC], IsEscClose
- CMFCPopupMenu [MFC], IsIdle
- CMFCPopupMenu [MFC], IsMenuSound
- CMFCPopupMenu [MFC], IsQuickCustomize
- CMFCPopupMenu [MFC], IsResizeble
- CMFCPopupMenu [MFC], IsRightAlign
- CMFCPopupMenu [MFC], IsScrollable
- CMFCPopupMenu [MFC], IsSendMenuSelectMsg
- CMFCPopupMenu [MFC], IsShown
- CMFCPopupMenu [MFC], MoveTo
- CMFCPopupMenu [MFC], OnCmdMsg
- CMFCPopupMenu [MFC], PostCommand
- CMFCPopupMenu [MFC], PreTranslateMessage
- CMFCPopupMenu [MFC], RecalcLayout
- CMFCPopupMenu [MFC], RemoveAllItems
- CMFCPopupMenu [MFC], RemoveItem
- CMFCPopupMenu [MFC], SaveState
- CMFCPopupMenu [MFC], SetAnimationSpeed
- CMFCPopupMenu [MFC], SetAnimationType
- CMFCPopupMenu [MFC], SetAutoDestroy
- CMFCPopupMenu [MFC], SetDefaultItem
- CMFCPopupMenu [MFC], SetForceMenuFocus
- CMFCPopupMenu [MFC], SetForceShadow
- CMFCPopupMenu [MFC], SetMaxWidth
- CMFCPopupMenu [MFC], SetMessageWnd
- CMFCPopupMenu [MFC], SetParentRibbonElement
- CMFCPopupMenu [MFC], SetQuickCustomizeType
- CMFCPopupMenu [MFC], SetQuickMode
- CMFCPopupMenu [MFC], SetRightAlign
- CMFCPopupMenu [MFC], SetSendMenuSelectMsg
- CMFCPopupMenu [MFC], ShowAllCommands
- CMFCPopupMenu [MFC], TriggerResize
- CMFCPopupMenu [MFC], UpdateAllShadows
- CMFCPopupMenu [MFC], UpdateShadow
- CMFCPopupMenu [MFC], CreateTearOffBar
- CMFCPopupMenu [MFC], OnChangeHot
- CMFCPopupMenu [MFC], OnChooseItem
ms.assetid: 9555dca1-8c9c-44c9-af72-0659ddad128e
ms.openlocfilehash: 74f161d68c3c58574d75ab64a1360fc7f571920d
ms.sourcegitcommit: 7a6116e48c3c11b97371b8ae4ecc23adce1f092d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/22/2020
ms.locfileid: "81751940"
---
# <a name="cmfcpopupmenu-class"></a>CMFCPopupMenu 类

实现 Windows 弹出菜单功能，并通过添加可拖曳菜单和工具提示等功能进行扩展。
有关详细信息，请参阅位于 Visual Studio 安装的**VC\\\\atlmfc src\\mfc**文件夹中的源代码。

## <a name="syntax"></a>语法

```
class CMFCPopupMenu : public CMiniFrameWnd
```

## <a name="members"></a>成员

### <a name="protected-constructors"></a>受保护的构造函数

|名称|说明|
|----------|-----------------|
|[CMFC弹出菜单：：CMFC弹出菜单](#cmfcpopupmenu)|构造 `CMFCPopupMenu` 对象。|

### <a name="public-methods"></a>公共方法

|名称|说明|
|----------|-----------------|
|[CMFC弹出菜单：：激活弹出菜单](#activatepopupmenu)||
|[CMFC弹出菜单：：始终显示空工具输入](#alwaysshowemptytoolsentry)|设置是否启用了弹出式菜单以显示用户定义工具的空条目。|
|[CMFC弹出菜单：：所有命令都显示](#areallcommandsshown)||
|[CMFC弹出菜单：：检查区域](#checkarea)|确定点相对于弹出菜单的位置。|
|[CMFC弹出菜单：：关闭菜单](#closemenu)||
|[CMFC弹出菜单：创建](#create)|创建一个弹出式菜单并将其附加到`CMFCPopupMenu`对象。|
|[CMFCPopupMenu：:DefaultMouse点击关闭](#defaultmouseclickonclose)||
|[CMFCPopup菜单：：启用菜单Logo](#enablemenulogo)|初始化弹出菜单的徽标。|
|[CMFCPopup菜单：：启用菜单声音](#enablemenusound)|启用菜单声音。|
|[CMFC弹出菜单：：启用调整](#enableresize)||
|[CMFC弹出菜单：：启用滚动](#enablescrolling)||
|[CMFC弹出菜单：：启用反转调整](#enablevertresize)||
|[CMFCPopup菜单：：查找子项按命令](#findsubitembycommand)||
|[CMFC弹出菜单：：获取活动菜单](#getactivemenu)|返回当前活动菜单。|
|[CMFCPopup菜单：：获取动画速度](#getanimationspeed)|返回弹出式菜单的动画速度。|
|[CMFCPopup菜单：：获取动画类型](#getanimationtype)|返回当前类型的弹出式菜单动画。|
|[CMFC弹出菜单：：获取方向](#getdropdirection)||
|[CMFCPopup菜单：：获取力量菜单焦点](#getforcemenufocus)|指示显示弹出式菜单时，焦点是否返回到菜单栏。|
|[CMFCPopup菜单：：获取力量阴影](#getforceshadow)||
|[CMFCPopup菜单：：获取HMenu](#gethmenu)|返回附加菜单资源的句柄。|
|[CMFC弹出菜单：：获取菜单栏](#getmenubar)|返回嵌入在弹出式菜单中的[CMFCPopupMenuBar。](../../mfc/reference/cmfcpopupmenubar-class.md)|
|[CMFC弹出菜单：：获取菜单项目](#getmenuitem)|返回指向指定索引处的菜单项的指针。|
|[CMFC弹出菜单：：获取菜单项计数](#getmenuitemcount)|返回弹出菜单中的项数。|
|[CMFCPopup菜单：：获取消息](#getmessagewnd)|返回指向框架路由弹出菜单消息的窗口的指针。|
|[CMFC弹出菜单：：获取家长区域](#getparentarea)||
|[CMFC弹出菜单：：获取家长按钮](#getparentbutton)|返回指向父工具栏按钮的指针。|
|[CMFC弹出菜单：：获取家长弹出菜单](#getparentpopupmenu)|返回指向父弹出窗口菜单的指针。|
|[CMFCPopup菜单：：获取父功能元素](#getparentribbonelement)||
|[CMFC弹出菜单：：获取父项工具栏](#getparenttoolbar)|返回指向父工具栏的指针。|
|[CMFCPopup菜单：：获取快速自定义类型](#getquickcustomizetype)||
|[CMFCPopup菜单：：获取塞尔项目](#getselitem)|返回指向当前所选菜单命令的指针。|
|[CMFCPopupMenu：：已调整大小](#hasbeenresized)||
|[CMFCPopup菜单：：隐藏很少使用的命令](#hiderarelyusedcommands)|指示弹出式菜单是否可以隐藏很少使用的命令。|
|[CMFCPopupMenu：：InCommand](#incommand)||
|[CMFC弹出菜单：：插入项目](#insertitem)|将新项目插入指定位置的弹出式菜单中。|
|[CMFCPopup菜单：：插入分隔符](#insertseparator)|在指定位置的弹出式菜单中插入分隔符。|
|[CMFC弹出菜单：：永远关闭](#isalwaysclose)||
|[CMFC弹出菜单：：随时显示空工具输入](#isalwaysshowemptytoolsentry)||
|[CMFC弹出菜单：：是自定义窗格](#iscustomizepane)|指示弹出式菜单是否充当**快速自定义窗格**。|
|[CMFCPopup菜单：：Iscclose](#isescclose)||
|[CMFC弹出菜单：：空闲](#isidle)|指示弹出式菜单当前是否处于空闲状态。|
|[CMFCPopup菜单：：IsMenuSound](#ismenusound)||
|[CMFCPopup菜单：：快速定制](#isquickcustomize)|确定关联的[CMFCToolBarMenuButton 类](../../mfc/reference/cmfctoolbarmenubutton-class.md)是否处于快速自定义模式。|
|[CMFC弹出菜单：：可重调整](#isresizeble)||
|[CMFCPopup菜单：：右对齐](#isrightalign)|指示菜单是右对齐还是左对齐。|
|[CMFC弹出菜单：：可滚动](#isscrollable)||
|[CMFC弹出菜单：：是发送菜单选择Mmsg](#issendmenuselectmsg)|指示当用户从弹出式菜单中选择命令时，框架是否通知父框架。|
|[CMFC弹出菜单：：显示](#isshown)|指示弹出式菜单当前是否可见。|
|[CMFCPopup菜单：：移动到](#moveto)||
|[CMFCPopupMenu：：OnCmdMsg](#oncmdmsg)|（重写 `CFrameWnd::OnCmdMsg`。）|
|[CMFCPopupMenu：:Post命令](#postcommand)||
|[CMFCPopup菜单：:P重新翻译消息](#pretranslatemessage)|（重写 `CFrameWnd::PreTranslateMessage`。）|
|[CMFCPopup菜单：：Recalclayout](#recalclayout)|当标准控制栏打开或关闭或调整框架窗口大小时，由框架调用。 （覆盖[CFramewnd：recalclayout](../../mfc/reference/cframewnd-class.md#recalclayout).）|
|[CMFC弹出菜单：：删除所有项目](#removeallitems)|清除弹出菜单中的所有项目。|
|[CMFC弹出菜单：：删除项目](#removeitem)|从弹出式菜单中删除指定的项。|
|[CMFC弹出菜单：：保存状态](#savestate)||
|[CMFCPopup菜单：：设置动画速度](#setanimationspeed)|设置弹出式菜单的动画速度。|
|[CMFC弹出菜单：：设置动画类型](#setanimationtype)|设置弹出式菜单的动画类型。|
|[CMFC弹出菜单：：设置自动销毁](#setautodestroy)||
|[CMFC弹出菜单：：设置默认项目](#setdefaultitem)|设置弹出式菜单的默认命令。|
|[CMFC弹出菜单：：设置强制菜单焦点](#setforcemenufocus)|显示弹出式菜单时，强制输入焦点返回到菜单栏。|
|[CMFC弹出菜单：：设置力量阴影](#setforceshadow)|当弹出菜单出现在主框架之外时，强制框架绘制菜单阴影。|
|[CMFC弹出菜单：：设置最大宽度](#setmaxwidth)|设置弹出式菜单的最大宽度。|
|[CMFCPopup菜单：：设置消息](#setmessagewnd)||
|[CMFCPopup菜单：：设置父功能区元素](#setparentribbonelement)||
|[CMFC弹出菜单：：设置快速自定义类型](#setquickcustomizetype)||
|[CMFC弹出菜单：：设置快速模式](#setquickmode)||
|[CMFC弹出菜单：：设置正确对齐](#setrightalign)|设置弹出式菜单的菜单对齐方式。|
|[CMFC弹出菜单：：设置发送菜单选择Mmsg](#setsendmenuselectmsg)|设置一个标志，用于控制当用户选择命令时弹出菜单是否通知其父框架。|
|[CMFC弹出菜单：：显示所有命令](#showallcommands)|强制弹出菜单显示所有命令。|
|[CMFC弹出菜单：：触发调整](#triggerresize)||
|[CMFC弹出菜单：：更新所有阴影](#updateallshadows)|更新所有打开的弹出式菜单的阴影。|
|[CMFC弹出菜单：：更新阴影](#updateshadow)|更新弹出式菜单的影子。|

### <a name="protected-methods"></a>受保护的方法

|名称|说明|
|----------|-----------------|
|[CMFC弹出菜单：：创建"撕裂栏"](#createtearoffbar)||
|[CMFCPopup菜单：：打开](#onchangehot)||
|[CMFC弹出菜单：：在选择项目上](#onchooseitem)||

### <a name="remarks"></a>备注

通常，MFC 会自动创建弹出式菜单。 如果要手动创建`CMFCPopupMenu`对象，请在堆上分配一个对象，然后调用[CMFCPopupMenu：：create](#create)。

## <a name="example"></a>示例

下面的示例演示如何配置弹出式菜单对象。 该示例演示如何设置徽标和弹出式菜单的声音、设置动画速度和类型、在主框外弹出菜单出现时绘制菜单阴影、设置最大宽度以及设置弹出式菜单的正确菜单对齐方式。 此代码段是[自定义页示例](../../overview/visual-cpp-samples.md)的一部分。

[!code-cpp[NVC_MFC_CustomPages#2](../../mfc/reference/codesnippet/cpp/cmfcpopupmenu-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>继承层次结构

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CFrameWnd](../../mfc/reference/cframewnd-class.md)

[CMiniFrameWnd](../../mfc/reference/cminiframewnd-class.md)

`CMFCPopupMenu`

## <a name="requirements"></a>要求

**标题：** afxpopupmenu.h

## <a name="cmfcpopupmenuactivatepopupmenu"></a><a name="activatepopupmenu"></a>CMFC弹出菜单：：激活弹出菜单

```
static BOOL __stdcall ActivatePopupMenu(
    CFrameWnd* pTopFrame,
    CMFCPopupMenu* pPopupMenu);
```

### <a name="parameters"></a>参数

[在]*pTop框架*<br/>
[在]*pPopupMenu*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenualwaysshowemptytoolsentry"></a><a name="alwaysshowemptytoolsentry"></a>CMFC弹出菜单：：始终显示空工具输入

设置是否启用了弹出式菜单以显示用户定义工具的空条目。

```
static void AlwaysShowEmptyToolsEntry(BOOL bShow = TRUE);
```

### <a name="parameters"></a>参数

*b显示*<br/>
[在]如果弹出式菜单可以显示空条目，则为 TRUE;否则。

## <a name="cmfcpopupmenuareallcommandsshown"></a><a name="areallcommandsshown"></a>CMFC弹出菜单：：所有命令都显示

```
BOOL AreAllCommandsShown() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenucheckarea"></a><a name="checkarea"></a>CMFC弹出菜单：：检查区域

确定点相对于弹出菜单的位置。

```
MENUAREA_TYPE CheckArea(const CPoint& ptScreen) const;
```

### <a name="parameters"></a>参数

*ptScreen*<br/>
[在]屏幕坐标中的一个点。

### <a name="return-value"></a>返回值

指示点相对于弹出菜单的位置的MENUAREA_TYPE参数。

### <a name="remarks"></a>备注

MENUAREA_TYPE参数可以具有以下任意值之一。

- 外部 - *ptScreen*在弹出式菜单之外。

- LOGO - *ptScreen*位于徽标区域上。

- TEAROFF_CAPTION - *ptScreen*位于撕下标题上。

- SHADOW_BOTTOM - *ptScreen*位于弹出式菜单的底部阴影上。

- SHADOW_RIGHT - *ptScreen*位于弹出式菜单的右阴影上。

- MENU - *ptScreen*超过命令。

## <a name="cmfcpopupmenuclosemenu"></a><a name="closemenu"></a>CMFC弹出菜单：：关闭菜单

```cpp
void CloseMenu(BOOL bSetFocusToBar = FALSE);
```

### <a name="parameters"></a>参数

[在]*bSetFocustoBar*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenucmfcpopupmenu"></a><a name="cmfcpopupmenu"></a>CMFC弹出菜单：：CMFC弹出菜单

构造[CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)对象。

```
CMFCPopupMenu(
    CMFCToolBarsMenuPropertyPage* pCustPage,
    LPCTSTR lpszTitle);
```

### <a name="parameters"></a>参数

*pCustPage*<br/>
[在]指向自定义页的指针。

*lpszTitle*<br/>
[在]包含菜单标题的字符串。

### <a name="remarks"></a>备注

此方法分配 的资源`CMFCPopupMenu`。 要创建弹出式菜单项，请致电[CMFCPopupMenu：：创建](#create)。

## <a name="cmfcpopupmenucreate"></a><a name="create"></a>CMFC弹出菜单：创建

创建一个弹出式菜单并将其附加到[CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)对象。

```
virtual BOOL Create(
    CWnd* pWndParent,
    int x,
    int y,
    HMENU hMenu,
    BOOL bLocked = FALSE,
    BOOL bOwnMessage = FALSE);
```

### <a name="parameters"></a>参数

*pwnd 父级*<br/>
[在]的`CMFCPopupMenu`父窗口。

*x*<br/>
[在]弹出菜单位置的水平屏幕坐标

*Y*<br/>
[在]弹出菜单位置的垂直屏幕坐标。

*hMenu*<br/>
[在]菜单资源的句柄。

*封锁*<br/>
[在]指示菜单是否可自定义的布尔参数。 FALSE 表示弹出式菜单是可自定义的。

*bown消息*<br/>
[在]一个布尔参数，指示框架如何路由菜单消息。 有关更多详细信息，请参阅“备注”部分。

### <a name="return-value"></a>返回值

如果方法成功，则为 TRUE;否则 FALSE。

### <a name="remarks"></a>备注

如果*bownMessage*为 TRUE，则框架会将任何菜单消息路由到*pWndParent*。 如果*bown 消息为 TRUE，* 则*pWndParent*不得为 NULL。 如果*bownMessage*是 FALSE，则框架会将菜单消息路由到父弹出窗口菜单。

### <a name="example"></a>示例

下面的示例演示如何使用`Create``CMFCPopuMenu`类的方法。 此代码段是[自定义页示例](../../overview/visual-cpp-samples.md)的一部分。

[!code-cpp[NVC_MFC_CustomPages#1](../../mfc/reference/codesnippet/cpp/cmfcpopupmenu-class_2.cpp)]

## <a name="cmfcpopupmenucreatetearoffbar"></a><a name="createtearoffbar"></a>CMFC弹出菜单：：创建"撕裂栏"

```
virtual CPane* CreateTearOffBar(
    CFrameWnd* pWndMain,
    UINT uiID,
    LPCTSTR lpszName);
```

### <a name="parameters"></a>参数

[在]*普恩德·梅因*<br/>
[在]*uiID*<br/>
[在]*lpsz名称*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenudefaultmouseclickonclose"></a><a name="defaultmouseclickonclose"></a>CMFCPopupMenu：:DefaultMouse点击关闭

```
virtual BOOL DefaultMouseClickOnClose() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuenablemenulogo"></a><a name="enablemenulogo"></a>CMFCPopup菜单：：启用菜单Logo

初始化弹出菜单的徽标。

```cpp
void EnableMenuLogo(
    int iLogoSize,
    LOGO_LOCATION nLogoLocation = MENU_LOGO_LEFT);
```

### <a name="parameters"></a>参数

*iLogoSize*<br/>
[在]徽标的大小（以像素为单位）。

*nLogo位置*<br/>
[在]指示徽标位置的枚举数据类型。

### <a name="remarks"></a>备注

要显示徽标，在主框架窗口中实现方法[CFramewndEx：onDrawMenuLogo。](../../mfc/reference/cframewndex-class.md#ondrawmenulogo)

*nLogoLocation*的可能值为MENU_LOGO_LEFT、MENU_LOGO_RIGHT、MENU_LOGO_TOP和MENU_LOGO_BOTTOM。

## <a name="cmfcpopupmenuenablemenusound"></a><a name="enablemenusound"></a>CMFCPopup菜单：：启用菜单声音

启用菜单声音。

```
static void EnableMenuSound(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>参数

*b 启用*<br/>
[在]TRUE 启用声音，否则 FALSE。

### <a name="remarks"></a>备注

如果启用声音，当用户打开弹出式菜单或选择菜单命令时，框架将调用[PlaySound](/windows/win32/api/shobjidl_core/nf-shobjidl_core-iusernotification-playsound)方法。 默认情况下，此功能已启用。

## <a name="cmfcpopupmenuenableresize"></a><a name="enableresize"></a>CMFC弹出菜单：：启用调整

```cpp
void EnableResize(CSize sizeMinResize);
```

### <a name="parameters"></a>参数

[在]*大小最小调整*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuenablescrolling"></a><a name="enablescrolling"></a>CMFC弹出菜单：：启用滚动

```cpp
void EnableScrolling(BOOL = TRUE);
```

### <a name="parameters"></a>参数

[在]*波尔*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuenablevertresize"></a><a name="enablevertresize"></a>CMFC弹出菜单：：启用反转调整

```cpp
void EnableVertResize(int nMinResize);
```

### <a name="parameters"></a>参数

[在]*nMinResize*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenufindsubitembycommand"></a><a name="findsubitembycommand"></a>CMFCPopup菜单：：查找子项按命令

```
CMFCToolBarMenuButton* FindSubItemByCommand(UINT uiCmd) const;
```

### <a name="parameters"></a>参数

[在]*乌伊Cmd*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenugetactivemenu"></a><a name="getactivemenu"></a>CMFC弹出菜单：：获取活动菜单

返回当前活动菜单。

```
static CMFCPopupMenu* GetActiveMenu();
```

### <a name="return-value"></a>返回值

指向活动弹出式菜单的指针，如果当前没有弹出窗口菜单处于活动状态，则指向 NULL。

### <a name="remarks"></a>备注

每个应用程序最多只能有一个活动弹出菜单。

## <a name="cmfcpopupmenugetanimationspeed"></a><a name="getanimationspeed"></a>CMFCPopup菜单：：获取动画速度

返回弹出式菜单的动画速度。

```
static UINT GetAnimationSpeed();
```

### <a name="return-value"></a>返回值

一个整数，指示弹出菜单动画完成所需的时间（以毫秒为单位）。

### <a name="remarks"></a>备注

动画速度是全局值。 使用[CMFCPopupMenu：：设置动画速度](#setanimationspeed)以更改弹出式菜单的动画速度。

## <a name="cmfcpopupmenugetanimationtype"></a><a name="getanimationtype"></a>CMFCPopup菜单：：获取动画类型

返回当前类型的弹出式动画。

```
static CMFCPopupMenu::ANIMATION_TYPE GetAnimationType(BOOL bNoSystem = FALSE);
```

### <a name="parameters"></a>参数

*bNoSystem*<br/>
[在]指示此方法是否检查全局值的布尔参数。 如果希望此方法返回[CMFCPopupMenu 类](../../mfc/reference/cmfcpopupmenu-class.md)的此实例的动画样式，则 FALSE。

### <a name="return-value"></a>返回值

描述动画类型的枚举值。

### <a name="remarks"></a>备注

弹出式菜单的动画样式对于应用程序来说是全局的。 使用[CMFCPopupMenuMenu：：设置动画类型](#setanimationtype)来设置动画样式。

下表列出了可能的动画类型。

|||
|-|-|
|NO_ANIMATION|弹出式菜单未设置动画，并立即显示。  |
|展开|框架显示从左上角到右下角的弹出式菜单。  |
|幻灯片|弹出式菜单从上到下移动。  |
|褪色|弹出式菜单首先显示为透明并逐渐凝固。  |

## <a name="cmfcpopupmenugetdropdirection"></a><a name="getdropdirection"></a>CMFC弹出菜单：：获取方向

```
DROP_DIRECTION GetDropDirection() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenugetforcemenufocus"></a><a name="getforcemenufocus"></a>CMFCPopup菜单：：获取力量菜单焦点

指示显示弹出式菜单时，焦点是否返回到菜单栏。

```
static BOOL GetForceMenuFocus();
```

### <a name="return-value"></a>返回值

如果显示弹出式菜单时输入焦点返回到菜单栏，则为 TRUE;如果弹出式菜单保留焦点，则 FALSE。

### <a name="remarks"></a>备注

默认情况下，应用程序不会将焦点返回到菜单栏。 要更改此设置，请使用[CMFCPopupMenuMenu：：设置ForceMenu焦点](#setforcemenufocus)。

## <a name="cmfcpopupmenugetforceshadow"></a><a name="getforceshadow"></a>CMFCPopup菜单：：获取力量阴影

```
static BOOL __stdcall GetForceShadow();
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenugethmenu"></a><a name="gethmenu"></a>CMFCPopup菜单：：获取HMenu

返回附加菜单资源的句柄。

```
HMENU GetHMenu();
```

## <a name="cmfcpopupmenugetmenubar"></a><a name="getmenubar"></a>CMFC弹出菜单：：获取菜单栏

返回嵌入在弹出式菜单中的[CMFCPopupMenuBar。](../../mfc/reference/cmfcpopupmenubar-class.md)

```
virtual CMFCPopupMenuBar* GetMenuBar();
```

### <a name="return-value"></a>返回值

指向嵌入`CMFCPopupMenuBar`的 指针。

### <a name="remarks"></a>备注

弹出菜单具有嵌入`CMFCPopupMenuBar`对象。 如果使用不同的嵌入式类，则必须在派生类中重写此方法。

## <a name="cmfcpopupmenugetmenuitem"></a><a name="getmenuitem"></a>CMFC弹出菜单：：获取菜单项目

返回指向指定索引处的菜单项的指针。

```
CMFCToolBarMenuButton* GetMenuItem(int iIndex) const;
```

### <a name="parameters"></a>参数

*iIndex*<br/>
[在]菜单项的零基索引。

### <a name="return-value"></a>返回值

指向菜单项的指针。 如果索引无效，则为 NULL。

### <a name="remarks"></a>备注

菜单项由[CMFCToolBarMenuButton 类](../../mfc/reference/cmfctoolbarmenubutton-class.md)表示。 调用此方法时，它将返回指向相应`CMFCToolBarMenuButton`的 指针。

## <a name="cmfcpopupmenugetmenuitemcount"></a><a name="getmenuitemcount"></a>CMFC弹出菜单：：获取菜单项计数

返回弹出式菜单中的项数。

```
int GetMenuItemCount() const;
```

### <a name="return-value"></a>返回值

菜单中的项数。

## <a name="cmfcpopupmenugetmessagewnd"></a><a name="getmessagewnd"></a>CMFCPopup菜单：：获取消息

返回指向框架路由弹出菜单消息的窗口的指针。

```
CWnd* GetMessageWnd() const;
```

### <a name="return-value"></a>返回值

指向接收弹出菜单消息的窗口的指针;如果没有窗口，则为 NULL。

### <a name="remarks"></a>备注

当您使用方法[CMFCPopupMenu：：创建](#create)以创建一个弹出式菜单时，可以指定接收菜单消息的窗口。

## <a name="cmfcpopupmenugetparentarea"></a><a name="getparentarea"></a>CMFC弹出菜单：：获取家长区域

```
virtual CWnd* GetParentArea(CRect& rectParentBtn);
```

### <a name="parameters"></a>参数

[在]*rectParentBtn*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenugetparentbutton"></a><a name="getparentbutton"></a>CMFC弹出菜单：：获取家长按钮

返回指向父工具栏按钮的指针。

```
CMFCToolBarMenuButton* GetParentButton() const;
```

### <a name="return-value"></a>返回值

指向父工具栏按钮的指针。 如果弹出式菜单没有父工具栏按钮，则为 NULL。

### <a name="remarks"></a>备注

`CMFCPopupMenu`可以与菜单上的按钮关联。 在这种情况下，当用户选择父工具栏按钮时，将显示弹出菜单。

如果弹出式菜单是快捷菜单，它将没有父工具栏按钮。

## <a name="cmfcpopupmenugetparentpopupmenu"></a><a name="getparentpopupmenu"></a>CMFC弹出菜单：：获取家长弹出菜单

返回指向父弹出窗口菜单的指针。

```
CMFCPopupMenu* GetParentPopupMenu() const;
```

### <a name="return-value"></a>返回值

指向父对象的指针;`CMFCPopupMenu`指向父对象的指针如果没有父弹出菜单，则为 NULL。

### <a name="remarks"></a>备注

仅当是子菜单时，弹出式菜单`CMFCPopupMenu`才具有父对象。

## <a name="cmfcpopupmenugetparentribbonelement"></a><a name="getparentribbonelement"></a>CMFCPopup菜单：：获取父功能元素

```
CMFCRibbonBaseElement* GetParentRibbonElement() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenugetparenttoolbar"></a><a name="getparenttoolbar"></a>CMFC弹出菜单：：获取父项工具栏

返回指向父工具栏的指针。

```
CMFCToolBar* GetParentToolBar() const;
```

### <a name="return-value"></a>返回值

指向父工具栏的指针。 如果弹出式菜单没有父工具栏，则为 NULL。

### <a name="remarks"></a>备注

如果`CMFCPopupMenu`是 快捷菜单，则它没有父工具栏。

## <a name="cmfcpopupmenugetquickcustomizetype"></a><a name="getquickcustomizetype"></a>CMFCPopup菜单：：获取快速自定义类型

```
QUICK_CUSTOMIZE_TYPE GetQuickCustomizeType() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenugetselitem"></a><a name="getselitem"></a>CMFCPopup菜单：：获取塞尔项目

返回指向当前所选菜单命令的指针。

```
CMFCToolBarMenuButton* GetSelItem();
```

### <a name="return-value"></a>返回值

指向当前选择的菜单命令的指针;如果未选择任何项目，则为 NULL。

### <a name="remarks"></a>备注

弹出式菜单上的菜单命令由[CMFCToolBarMenuButton 类](../../mfc/reference/cmfctoolbarmenubutton-class.md)或派生自 的`CMFCToolBarMenuButton`类表示。

## <a name="cmfcpopupmenuhasbeenresized"></a><a name="hasbeenresized"></a>CMFCPopupMenu：：已调整大小

```
BOOL HasBeenResized() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuhiderarelyusedcommands"></a><a name="hiderarelyusedcommands"></a>CMFCPopup菜单：：隐藏很少使用的命令

指示弹出式菜单是否可以隐藏很少使用的命令。

```
BOOL HideRarelyUsedCommands() const;
```

### <a name="return-value"></a>返回值

如果弹出式菜单可以隐藏很少使用的命令，则为 TRUE;否则 FALSE。

### <a name="remarks"></a>备注

此方法仅指定弹出式菜单是否可以隐藏很少使用的命令，而不是启用该配置时。 如果弹出菜单具有父按钮，并且父窗口派生自[CMFCMenuBar 类](../../mfc/reference/cmfcmenubar-class.md)，则可以隐藏很少使用的命令。 使用[CMFCMenuBar：：设置最近使用的菜单](../../mfc/reference/cmfcmenubar-class.md#setrecentlyusedmenus)以启用此功能，CMFCMenuBar：[最近使用菜单](../../mfc/reference/cmfcmenubar-class.md#isrecentlyusedmenus)以确定此功能当前是否已启用。 必须为父窗口调用这两种方法。

## <a name="cmfcpopupmenuincommand"></a><a name="incommand"></a>CMFCPopupMenu：：InCommand

```
virtual BOOL InCommand();
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuinsertitem"></a><a name="insertitem"></a>CMFC弹出菜单：：插入项目

将新项目插入指定位置的弹出式菜单中。

```
int InsertItem(
    const CMFCToolBarMenuButton& button,
    int iInsertA = -1);
```

### <a name="parameters"></a>参数

*button*<br/>
[在]要添加的菜单项的引用。

*iInsertAt*<br/>
[在]新项目的零基索引。 如果*iInsertAt*为 -1，则该项目将添加到菜单的末尾。

### <a name="return-value"></a>返回值

插入项目的位置的零基索引。 -1 如果方法失败。

### <a name="remarks"></a>备注

如果为*iInsertAt*提供了无效值，则此方法将失败，例如大于弹出式菜单上当前项数的整数。

## <a name="cmfcpopupmenuinsertseparator"></a><a name="insertseparator"></a>CMFCPopup菜单：：插入分隔符

在指定位置的弹出式菜单中插入分隔符。

```
int InsertSeparator(int iInsertAt = -1);
```

### <a name="parameters"></a>参数

*iInsertAt*<br/>
[在]此方法将插入分隔符的位置的零基索引。

### <a name="return-value"></a>返回值

插入分隔符的位置的零基索引。 -1 如果此方法失败。

### <a name="remarks"></a>备注

*iInsertAt*的值为 -1 表示此方法将分隔符添加到弹出式菜单的末尾。

如果*iInsertAt*是无效值，则此方法将失败。

## <a name="cmfcpopupmenuisalwaysclose"></a><a name="isalwaysclose"></a>CMFC弹出菜单：：永远关闭

```
virtual BOOL IsAlwaysClose() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuisalwaysshowemptytoolsentry"></a><a name="isalwaysshowemptytoolsentry"></a>CMFC弹出菜单：：随时显示空工具输入

```
static BOOL __stdcall IsAlwaysShowEmptyToolsEntry();
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuiscustomizepane"></a><a name="iscustomizepane"></a>CMFC弹出菜单：：是自定义窗格

指示弹出式菜单是否充当**快速自定义窗格**。

```
BOOL IsCustomizePane();
```

### <a name="return-value"></a>返回值

如果弹出窗口是 **"库克自定义窗格"，** 则为 TRUE;否则 FALSE。

### <a name="remarks"></a>备注

使用 **"快速自定义窗格**"可使用户直接自定义弹出式菜单。 **"快速自定义窗格**"是`CMFCPopupMenu`当用户单击工具栏按钮直接编辑工具栏时出现的。

您的应用程序应在[CMDIFramewndEx 期间调用此方法：：在显示自定义窗格](../../mfc/reference/cmdiframewndex-class.md#onshowcustomizepane)。

## <a name="cmfcpopupmenuisescclose"></a><a name="isescclose"></a>CMFCPopup菜单：：Iscclose

```
BOOL IsEscClose();
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuisidle"></a><a name="isidle"></a>CMFC弹出菜单：：空闲

指示弹出式菜单当前是否处于空闲状态。

```
virtual BOOL IsIdle() const;
```

### <a name="return-value"></a>返回值

如果弹出式菜单处于空闲模式，则为 TRUE;如果弹出菜单处于空闲状态，则为 TRUE。否则 FALSE。

### <a name="remarks"></a>备注

默认情况下，如果显示动画完成且用户未滚动弹出窗口菜单，则弹出窗口菜单处于空闲模式。

## <a name="cmfcpopupmenuismenusound"></a><a name="ismenusound"></a>CMFCPopup菜单：：IsMenuSound

```
static UINT __stdcall IsMenuSound();
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuisquickcustomize"></a><a name="isquickcustomize"></a>CMFCPopup菜单：：快速定制

确定关联的[CMFCToolBarMenuButton 类](../../mfc/reference/cmfctoolbarmenubutton-class.md)是否处于快速自定义模式。

```
BOOL IsQuickCustomize();
```

### <a name="return-value"></a>返回值

如果关联的菜单按钮处于快速自定义模式，则为 TRUE;否则 FALSE。 如果弹出式菜单未与 关联，则此方法也将返回`CMFCToolBarMenuButton`FALSE。

### <a name="remarks"></a>备注

在"快速自定义"模式下，用户选择工具栏上的按钮以直接自定义该按钮。

## <a name="cmfcpopupmenuisresizeble"></a><a name="isresizeble"></a>CMFC弹出菜单：：可重调整

```
BOOL IsResizeble() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuisrightalign"></a><a name="isrightalign"></a>CMFCPopup菜单：：右对齐

指示菜单是右对齐还是左对齐。

```
BOOL IsRightAlign() const;
```

### <a name="return-value"></a>返回值

如果菜单正确对齐，则为 TRUE;如果菜单左对齐，则 FALSE。

### <a name="remarks"></a>备注

您可以使用[CMFCPopupMenuMenu：：设置右对齐](#setrightalign)来设置菜单对齐方式。 默认情况下，弹出式菜单使用左对齐。

菜单对齐不是全局设置，并且可能因弹出式菜单而异。

## <a name="cmfcpopupmenuisscrollable"></a><a name="isscrollable"></a>CMFC弹出菜单：：可滚动

```
BOOL IsScrollable() const;
```

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuissendmenuselectmsg"></a><a name="issendmenuselectmsg"></a>CMFC弹出菜单：：是发送菜单选择Mmsg

指示当用户从弹出式菜单中选择命令时，框架是否通知父框架。

```
static BOOL IsSendMenuSelectMsg();
```

### <a name="return-value"></a>返回值

如果框架通知父框架，则为 TRUE;否则 FALSE。

### <a name="remarks"></a>备注

当使用者选择菜单命令时，框架通过向父帧发送WM_MENUSELECT消息来通知父帧。

## <a name="cmfcpopupmenuisshown"></a><a name="isshown"></a>CMFC弹出菜单：：显示

指示弹出式菜单当前是否可见。

```
BOOL IsShown() const;
```

### <a name="return-value"></a>返回值

如果弹出菜单可见，则为 TRUE;否则 FALSE。

## <a name="cmfcpopupmenumoveto"></a><a name="moveto"></a>CMFCPopup菜单：：移动到

```cpp
void MoveTo(const CPoint& pt);
```

### <a name="parameters"></a>参数

[在]*pt*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuonchangehot"></a><a name="onchangehot"></a>CMFCPopup菜单：：打开

```
virtual void OnChangeHot(int nHot);
```

### <a name="parameters"></a>参数

[在]*nHot*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuonchooseitem"></a><a name="onchooseitem"></a>CMFC弹出菜单：：在选择项目上

```
virtual void OnChooseItem(UINT uidCmdID);
```

### <a name="parameters"></a>参数

[在]*乌伊德·CmdID*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuoncmdmsg"></a><a name="oncmdmsg"></a>CMFCPopupMenu：：OnCmdMsg

```
virtual BOOL OnCmdMsg(
    UINT nID,
    int nCode,
    void* pExtra,
    AFX_CMDHANDLERINFO* pHandlerInfo);
```

### <a name="parameters"></a>参数

[在]*nID*<br/>
[在]*n代码*<br/>
[在]*pExtra*<br/>
[在]*pHandlerInfo*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenupostcommand"></a><a name="postcommand"></a>CMFCPopupMenu：:Post命令

```
BOOL PostCommand(UINT uiCommandID);
```

### <a name="parameters"></a>参数

[在]*uiCommandID*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenupretranslatemessage"></a><a name="pretranslatemessage"></a>CMFCPopup菜单：:P重新翻译消息

```
virtual BOOL PreTranslateMessage(MSG* pMsg);
```

### <a name="parameters"></a>参数

[在]*pMsg*<br/>

### <a name="return-value"></a>返回值

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenurecalclayout"></a><a name="recalclayout"></a>CMFCPopup菜单：：Recalclayout

```
virtual void RecalcLayout(BOOL bNotify = TRUE);
```

### <a name="parameters"></a>参数

[在]*b 通知*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuremoveallitems"></a><a name="removeallitems"></a>CMFC弹出菜单：：删除所有项目

清除弹出菜单中的所有项目。

```cpp
void RemoveAllItems();
```

## <a name="cmfcpopupmenuremoveitem"></a><a name="removeitem"></a>CMFC弹出菜单：：删除项目

从弹出式菜单中删除指定的项。

```
BOOL RemoveItem(int iIndex);
```

### <a name="parameters"></a>参数

*iIndex*<br/>
[在]要删除的项的零基索引。

### <a name="return-value"></a>返回值

如果方法成功，则为 TRUE;否则 FALSE。

### <a name="remarks"></a>备注

此方法会自动排列受项目删除影响的任何分隔符。 有关框架如何重新排列分隔符的详细信息，请参阅[CMFCToolBar：：：删除按钮](../../mfc/reference/cmfctoolbar-class.md#removebutton)。

## <a name="cmfcpopupmenusavestate"></a><a name="savestate"></a>CMFC弹出菜单：：保存状态

```
virtual void SaveState();
```

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenusetanimationspeed"></a><a name="setanimationspeed"></a>CMFCPopup菜单：：设置动画速度

设置弹出式菜单的动画速度。

```
static void SetAnimationSpeed(UINT nElapse);
```

### <a name="parameters"></a>参数

*脱位*<br/>
[在]新的动画速度，以毫秒为单位。

### <a name="remarks"></a>备注

动画速度是全局值，会影响应用程序中的所有弹出式菜单。 此值指定动画完成时长。

默认情况下，此参数设置为 30 毫秒。 *nElapse*的有效值范围为 0 到 200。

## <a name="cmfcpopupmenusetanimationtype"></a><a name="setanimationtype"></a>CMFC弹出菜单：：设置动画类型

设置此弹出式菜单的动画类型。

```
static void SetAnimationType(CMFCPopupMenu::ANIMATION_TYPE type);
```

### <a name="parameters"></a>参数

type <br/>
[在]指定动画类型的枚举数据类型。

### <a name="remarks"></a>备注

有关*类型*的有效值列表，请参阅[CMFCPopupMenuMenu：：获取动画类型](#getanimationtype)。

## <a name="cmfcpopupmenusetautodestroy"></a><a name="setautodestroy"></a>CMFC弹出菜单：：设置自动销毁

```cpp
void SetAutoDestroy(BOOL bAutoDestroy = TRUE);
```

### <a name="parameters"></a>参数

[在]*bAuto销毁*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenusetdefaultitem"></a><a name="setdefaultitem"></a>CMFC弹出菜单：：设置默认项目

设置弹出式菜单的默认命令。

```cpp
void SetDefaultItem(UINT uiCmd);
```

### <a name="parameters"></a>参数

*乌伊Cmd*<br/>
[在]新默认命令的菜单命令 ID。

### <a name="remarks"></a>备注

弹出式菜单中的默认命令是在弹出菜单出现时选择的命令。

## <a name="cmfcpopupmenusetforcemenufocus"></a><a name="setforcemenufocus"></a>CMFC弹出菜单：：设置强制菜单焦点

显示弹出式菜单时，强制输入焦点返回到菜单栏。

```
static void SetForceMenuFocus(BOOL bValue);
```

### <a name="parameters"></a>参数

*bValue*<br/>
[在]如果希望框架在显示弹出式菜单时强制将输入焦点强制到菜单栏，则为 TRUE。 如果希望弹出菜单保留焦点，则 FALSE。

### <a name="remarks"></a>备注

此方法为应用程序中的所有弹出式菜单设置全局标志。 默认情况下，此功能未启用。

## <a name="cmfcpopupmenusetforceshadow"></a><a name="setforceshadow"></a>CMFC弹出菜单：：设置力量阴影

当弹出菜单出现在主框架之外时，强制框架绘制菜单阴影。

```
static void SetForceShadow(BOOL bValue);
```

### <a name="parameters"></a>参数

*bValue*<br/>
[在]如果希望框架绘制菜单阴影，则为 TRUE，否则为 FALSE。

### <a name="remarks"></a>备注

调用此方法时，它会在应用程序中设置全局标志。 此标志会影响应用程序中的所有弹出式菜单。

## <a name="cmfcpopupmenusetmaxwidth"></a><a name="setmaxwidth"></a>CMFC弹出菜单：：设置最大宽度

设置弹出式菜单的最大宽度。

```cpp
void SetMaxWidth(int iMaxWidth);
```

### <a name="parameters"></a>参数

*iMaxWidth*<br/>
[在]弹出式菜单的最大宽度（以像素为单位）。

### <a name="remarks"></a>备注

如果与菜单命令关联的文本不能包含最大宽度，则该文本将被截断，不适合的零件将替换为三个点。

## <a name="cmfcpopupmenusetmessagewnd"></a><a name="setmessagewnd"></a>CMFCPopup菜单：：设置消息

```cpp
void SetMessageWnd(CWnd* pMsgWnd);
```

### <a name="parameters"></a>参数

[在]*pMsgwnd*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenusetparentribbonelement"></a><a name="setparentribbonelement"></a>CMFCPopup菜单：：设置父功能区元素

```cpp
void SetParentRibbonElement(CMFCRibbonBaseElement* pElem);
```

### <a name="parameters"></a>参数

[在]*佩莱姆*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenusetquickcustomizetype"></a><a name="setquickcustomizetype"></a>CMFC弹出菜单：：设置快速自定义类型

```cpp
void SetQuickCustomizeType(QUICK_CUSTOMIZE_TYPE Type);
```

### <a name="parameters"></a>参数

[在]*类型*<br/>

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenusetquickmode"></a><a name="setquickmode"></a>CMFC弹出菜单：：设置快速模式

```cpp
void SetQuickMode();
```

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenusetrightalign"></a><a name="setrightalign"></a>CMFC弹出菜单：：设置正确对齐

设置弹出式菜单的菜单对齐方式。

```cpp
void SetRightAlign(BOOL bRightAlign = TRUE);
```

### <a name="parameters"></a>参数

*b 右对齐*<br/>
[在]指示菜单对齐的布尔。 TRUE 表示右对齐，FALSE 表示左对齐。

### <a name="remarks"></a>备注

默认情况下，所有弹出式菜单都左对齐。

## <a name="cmfcpopupmenusetsendmenuselectmsg"></a><a name="setsendmenuselectmsg"></a>CMFC弹出菜单：：设置发送菜单选择Mmsg

设置一个标志，用于控制当用户选择命令时弹出菜单是否通知其父框架。

```
static void SetSendMenuSelectMsg(BOOL bSet = TRUE);
```

### <a name="parameters"></a>参数

*bSet*<br/>
[在]如果弹出式菜单通知其父框架，则为 TRUE，否则为 FALSE。

### <a name="remarks"></a>备注

这是应用程序中所有弹出式菜单的全局选项。 如果启用，则当用户选择命令时，弹出式菜单将向父帧发送WM_MENUSELECT消息。

## <a name="cmfcpopupmenushowallcommands"></a><a name="showallcommands"></a>CMFC弹出菜单：：显示所有命令

强制弹出菜单显示所有命令。

```cpp
void ShowAllCommands();
```

### <a name="remarks"></a>备注

这不是全局设置，仅影响当前弹出菜单。

## <a name="cmfcpopupmenutriggerresize"></a><a name="triggerresize"></a>CMFC弹出菜单：：触发调整

```cpp
void TriggerResize();
```

### <a name="remarks"></a>备注

## <a name="cmfcpopupmenuupdateallshadows"></a><a name="updateallshadows"></a>CMFC弹出菜单：：更新所有阴影

更新所有打开的弹出式菜单的阴影。

```
static void UpdateAllShadows(LPRECT lprectScreen = NULL);
```

### <a name="parameters"></a>参数

*lprect 屏幕*<br/>
[在]指定要更新的区域的矩形，位于屏幕坐标中。

### <a name="remarks"></a>备注

当弹出式菜单显示在动画控件或其他具有动态内容的窗口时，此方法很有用。

## <a name="cmfcpopupmenuupdateshadow"></a><a name="updateshadow"></a>CMFC弹出菜单：：更新阴影

更新弹出式菜单的影子。

```cpp
void UpdateShadow(LPRECT lprectScreen = NULL);
```

### <a name="parameters"></a>参数

*lprect 屏幕*<br/>
[在]屏幕坐标中指定要更新的区域边界的矩形。

### <a name="remarks"></a>备注

当具有阴影的弹出式菜单与动画图像重叠时，调用此方法。

## <a name="see-also"></a>请参阅

[层次结构图表](../../mfc/hierarchy-chart.md)<br/>
[类](../../mfc/reference/mfc-classes.md)<br/>
[CMFC弹出菜单栏类](../../mfc/reference/cmfcpopupmenubar-class.md)
