---
title: 参考：Windows 性能分析器视图
description: 有关 windows 性能分析器中提供的C++生成见解视图的参考。
ms.date: 11/03/2019
helpviewer_keywords:
- C++ Build Insights
- throughput analysis
- build time analysis
- vcperf.exe
ms.openlocfilehash: b54b1b76d83b77ec7b8d8d3309d81ed9eb2db2d0
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/14/2020
ms.locfileid: "81323234"
---
# <a name="reference-windows-performance-analyzer-views"></a>参考：Windows 性能分析器视图

::: moniker range="<=vs-2017"

C++构建见解工具可在 Visual Studio 2019 中使用。 要查看此版本的文档，请将本文的可视化工作室**版本**选择器控件设置为 Visual Studio 2019。 它位于此页面的目录顶部。

::: moniker-end
::: moniker range="vs-2019"

本文详细介绍了 Windows 性能分析器 （WPA） 中提供的每个C++生成见解视图。 使用此页面查找：

- 数据列描述;和
- 每个视图的可用预设，包括其预期用途和首选查看模式。

如果您是 WPA 的新功能，我们建议您首先熟悉[WPA 的基础知识，以便C++构建见解](/cpp/build-insights/tutorials/wpa-basics)。

## <a name="build-explorer"></a>生成资源管理器

生成资源管理器视图用于：

- 诊断并行性问题，
- 确定您的生成时间是否由分析、代码生成或链接主导，以及
- 识别瓶颈和异常长的构建活动。

### <a name="build-explorer-view-data-columns"></a>生成资源管理器视图数据列

| 列名 | 说明 |
|-|-|
| 生成时间轴描述 | 文本描述当前活动或属性发生的时间线。 |
| 生成时间轴Id          | 当前活动或属性所在的时间线的基于零的标识符。 |
| 组件                | 发出当前事件时正在编译或链接的组件。 当没有组件与此事件关联时，此列的值是*\<"调用 X 信息\>*"。 X 是发出事件时正在执行的调用的唯一数字标识符。 此标识符与此事件的"调用 Id"列中的标识符相同。 |
| Count                    | 此数据行表示的活动或属性数。 此值始终为 1，并且仅在对多个行进行分组时的聚合方案中有用。 |
| 独家CPU时间         | 此活动使用的 CPU 时间量（以毫秒为单位）。 用于子活动的时间不包括在此金额中。 |
| 独家持续时间        | 活动的毫秒持续时间。 此金额不包括子活动的持续时间。 |
| 包容性CPU时间         | 此活动和所有子活动使用的 CPU 时间量（以毫秒为单位）。 |
| 包容性持续时间        | 此活动的毫秒持续时间，包括所有子活动。 |
| 调用描述    | 调用此事件的文本描述发生在。 描述包括它是*cl.exe*还是*link.exe*，以及唯一的数字调用标识符。 如果适用，它包括调用期间编译或链接的组件的完整路径。 对于不生成任何组件的调用，或者对于生成多个组件的调用，路径为空。 调用标识符与"调用 Id"列中的标识符相同。 |
| 调用 ID             | 调用此事件的唯一数字标识符发生在中。 |
| 名称                     | 此事件表示的活动或属性的名称。 |
| 时间                     | 标识事件发生时间的时间戳。 |
| 工具                     | 发生此事件时正在执行的工具。 此列的值是 CL 或 Link。 |
| 类型                     | 当前事件的类型。 此值为"活动"或"属性"。 |
| “值”                    | 如果当前事件是属性，则此列包含其值。 当当前事件是活动时，此列为空。 |

### <a name="build-explorer-view-presets"></a>生成资源管理器视图预设

| 预设名称           | 首选视图模式 | 如何使用 |
|-----------------------|---------------------|------------|
| 活动统计   | 图形/表       | 使用此预设可以查看所有生成资源管理器活动的聚合统计信息。 在表模式下，一目了然地判断您的生成是否由分析、代码生成或链接器控制。 每个活动的聚合持续时间按降序排序。 通过展开顶部节点来深入了解，以轻松查找这些顶级活动占用最多时间的调用。 如果您愿意，可以调整 WPA 设置以显示平均值或其他类型的聚合。 在图形模式下，查看生成期间每个活动何时处于活动状态。 |
| 调用           | 图形               | 向下滚动浏览按开始时间排序的图形视图中的调用列表。 您可以将它与 CPU（采样）视图一起使用，以查找与低 CPU 利用率区域一致的调用。 检测并行性问题。 |
| 调用属性 | 表               | 快速查找有关给定编译器或链接器调用的关键信息。 确定其版本、工作目录或用于调用它的完整命令行。 |
| 时间线             | 图形               | 查看生成如何并行的条形图。 一目了然地确定并行问题和瓶颈。 配置 WPA 可根据您的需要为条形分配不同的含义。 选择调用说明作为最后一个分组列，以查看所有调用的颜色编码条形图。 它可以帮助您快速识别耗时的罪魁祸首。 然后，放大并选择活动名称作为最后一个分组列以查看最长的部分。 |

## <a name="files"></a>文件

"文件"视图用于：

- 确定哪些标头最常包含，并且
- 帮助您决定在预编译标头 （PCH） 中包括哪些内容。

### <a name="files-view-data-columns"></a>文件视图数据列

| 列名              | 说明 |
|--------------------------|-------------|
| ActivityName             | 发出此文件事件时正在进行的活动。 目前，此值始终是*解析*。 |
| 生成时间轴描述 | * |
| 生成时间轴Id          | * |
| 组件                | * |
| Count                    | * |
| 深度                    | 在中找到此文件的包含树中的零基位置。 计数从包含树的根开始。 值 0 通常对应于 .c/.cpp 文件。 |
| 独家持续时间        | * |
| 包括               | 包含当前文件的文件的完整路径。 |
| 包含路径             | 当前文件的完整路径。 |
| 包容性持续时间        | * |
| 调用 ID             | * |
| StartTime                | 表示当前文件事件发出时间的时间戳。 |
| 工具                     | * |

\*此列的值与[生成资源管理器](#build-explorer-view-data-columns)视图中的值相同。

### <a name="files-view-presets"></a>文件视图预设

| 预设名称 | 首选视图模式 | 如何使用 |
|-------------|---------------------|------------|
| 统计信息  | 表               | 通过按降序查看列表，查看哪些文件的聚合分析时间最高。 使用此信息可帮助您重组标头或决定在 PCH 中包括哪些内容。 |

## <a name="functions"></a>函数

函数视图用于标识代码生成时间过长的函数。

### <a name="functions-view-data-columns"></a>函数查看数据列

| 列名              | 说明 |
|--------------------------|-------------|
| ActivityName             | 发出此函数事件时正在进行的活动。 目前，此值始终是*代码生成*。 |
| 生成时间轴描述 | * |
| 生成时间轴Id          | * |
| 组件                | * |
| Count                    | * |
| Duration                 | 此函数的代码生成活动的持续时间。 |
| FunctionName             | 正在进行代码生成的功能的名称。 |
| 调用 ID             | * |
| StartTime                | 表示当前函数事件发出时间戳。 |
| 工具                     | * |

\*此列的值与[生成资源管理器](#build-explorer-view-data-columns)视图中的值相同。

### <a name="functions-view-presets"></a>功能视图预设

| 预设名称 | 首选视图模式 | 如何使用 |
|-------------|---------------------|------------|
| 统计信息  | 表               | 通过按降序查看列表，查看哪些函数的聚合代码生成时间最高。 它们可能会提示代码在何处过度使用 **__forceinline**关键字，或者某些函数可能太大。 |
| 时间线   | 图形               | 查看此条形图，了解生成时间最多的函数的位置和持续时间。 查看它们是否符合生成资源管理器视图中的瓶颈。 如果他们这样做，则采取适当的措施来减少代码生成时间，并简化您的生成时间。 |

## <a name="see-also"></a>另请参阅

[开始C++构建见解](/cpp/build-insights/get-started-with-cpp-build-insights)\
[参考： vcperf 命令](vcperf-commands.md)\
[教程：Windows 性能分析器基础知识](/cpp/build-insights/tutorials/wpa-basics)\
[Windows Performance Analyzer](/windows-hardware/test/wpt/windows-performance-analyzer)

::: moniker-end
