---
title: CMFCToolBarButton 类
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeDropped
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStored
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStretched
- AFXTOOLBARBUTTON/CMFCToolBarButton::CompareWith
- AFXTOOLBARBUTTON/CMFCToolBarButton::CopyFrom
- AFXTOOLBARBUTTON/CMFCToolBarButton::CreateFromOleData
- AFXTOOLBARBUTTON/CMFCToolBarButton::EnableWindow
- AFXTOOLBARBUTTON/CMFCToolBarButton::ExportToMenuButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetClipboardFormat
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetHwnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetInvalidateRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetTextSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::HasFocus
- AFXTOOLBARBUTTON/CMFCToolBarButton::HaveHotBorder
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawText
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDroppedDown
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsEditable
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsExtraSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsFirstInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHidden
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHorizontal
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLastInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLocked
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsOwnerOf
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsWindowVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::NotifyCommand
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnAddToCustomizePage
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrop
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCalculateSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCancelMode
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnChangeParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClick
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClickUp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnContextHelp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCtlColor
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCustomizeMenu
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDblClk
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDraw
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDrawOnCustomizeList
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGetCustomToolTipText
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGlobalFontsChanged
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnMove
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnShow
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnToolHitTest
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnUpdateToolTip
- AFXTOOLBARBUTTON/CMFCToolBarButton::PrepareDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::Rect
- AFXTOOLBARBUTTON/CMFCToolBarButton::ResetImageToDefault
- AFXTOOLBARBUTTON/CMFCToolBarButton::SaveBarState
- AFXTOOLBARBUTTON/CMFCToolBarButton::Serialize
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetACCData
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetClipboardFormatName
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRadio
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::Show
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bTextBelow
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bUserButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWholeText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrap
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrapText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nID
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_strText
helpviewer_keywords:
- CMFCToolBarButton [MFC], CMFCToolBarButton
- CMFCToolBarButton [MFC], CanBeDropped
- CMFCToolBarButton [MFC], CanBeStored
- CMFCToolBarButton [MFC], CanBeStretched
- CMFCToolBarButton [MFC], CompareWith
- CMFCToolBarButton [MFC], CopyFrom
- CMFCToolBarButton [MFC], CreateFromOleData
- CMFCToolBarButton [MFC], EnableWindow
- CMFCToolBarButton [MFC], ExportToMenuButton
- CMFCToolBarButton [MFC], GetClipboardFormat
- CMFCToolBarButton [MFC], GetHwnd
- CMFCToolBarButton [MFC], GetImage
- CMFCToolBarButton [MFC], GetInvalidateRect
- CMFCToolBarButton [MFC], GetParentWnd
- CMFCToolBarButton [MFC], GetProtectedCommands
- CMFCToolBarButton [MFC], GetTextSize
- CMFCToolBarButton [MFC], HasFocus
- CMFCToolBarButton [MFC], HaveHotBorder
- CMFCToolBarButton [MFC], IsDrawImage
- CMFCToolBarButton [MFC], IsDrawText
- CMFCToolBarButton [MFC], IsDroppedDown
- CMFCToolBarButton [MFC], IsEditable
- CMFCToolBarButton [MFC], IsExtraSize
- CMFCToolBarButton [MFC], IsFirstInGroup
- CMFCToolBarButton [MFC], IsHidden
- CMFCToolBarButton [MFC], IsHorizontal
- CMFCToolBarButton [MFC], IsLastInGroup
- CMFCToolBarButton [MFC], IsLocked
- CMFCToolBarButton [MFC], IsOwnerOf
- CMFCToolBarButton [MFC], IsVisible
- CMFCToolBarButton [MFC], IsWindowVisible
- CMFCToolBarButton [MFC], NotifyCommand
- CMFCToolBarButton [MFC], OnAddToCustomizePage
- CMFCToolBarButton [MFC], OnBeforeDrag
- CMFCToolBarButton [MFC], OnBeforeDrop
- CMFCToolBarButton [MFC], OnCalculateSize
- CMFCToolBarButton [MFC], OnCancelMode
- CMFCToolBarButton [MFC], OnChangeParentWnd
- CMFCToolBarButton [MFC], OnClick
- CMFCToolBarButton [MFC], OnClickUp
- CMFCToolBarButton [MFC], OnContextHelp
- CMFCToolBarButton [MFC], OnCtlColor
- CMFCToolBarButton [MFC], OnCustomizeMenu
- CMFCToolBarButton [MFC], OnDblClk
- CMFCToolBarButton [MFC], OnDraw
- CMFCToolBarButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarButton [MFC], OnGetCustomToolTipText
- CMFCToolBarButton [MFC], OnGlobalFontsChanged
- CMFCToolBarButton [MFC], OnMove
- CMFCToolBarButton [MFC], OnShow
- CMFCToolBarButton [MFC], OnSize
- CMFCToolBarButton [MFC], OnToolHitTest
- CMFCToolBarButton [MFC], OnUpdateToolTip
- CMFCToolBarButton [MFC], PrepareDrag
- CMFCToolBarButton [MFC], Rect
- CMFCToolBarButton [MFC], ResetImageToDefault
- CMFCToolBarButton [MFC], SaveBarState
- CMFCToolBarButton [MFC], Serialize
- CMFCToolBarButton [MFC], SetACCData
- CMFCToolBarButton [MFC], SetClipboardFormatName
- CMFCToolBarButton [MFC], SetImage
- CMFCToolBarButton [MFC], SetProtectedCommands
- CMFCToolBarButton [MFC], SetRadio
- CMFCToolBarButton [MFC], SetRect
- CMFCToolBarButton [MFC], SetStyle
- CMFCToolBarButton [MFC], SetVisible
- CMFCToolBarButton [MFC], Show
- CMFCToolBarButton [MFC], m_bImage
- CMFCToolBarButton [MFC], m_bText
- CMFCToolBarButton [MFC], m_bTextBelow
- CMFCToolBarButton [MFC], m_bUserButton
- CMFCToolBarButton [MFC], m_bWholeText
- CMFCToolBarButton [MFC], m_bWrap
- CMFCToolBarButton [MFC], m_bWrapText
- CMFCToolBarButton [MFC], m_nID
- CMFCToolBarButton [MFC], m_nStyle
- CMFCToolBarButton [MFC], m_strText
ms.assetid: 8a6ecffb-86b0-4f5c-8211-a9146b463efd
ms.openlocfilehash: 8e96740ba6755f489be07fbf8996cfa8b049314a
ms.sourcegitcommit: 7a6116e48c3c11b97371b8ae4ecc23adce1f092d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/22/2020
ms.locfileid: "81754025"
---
# <a name="cmfctoolbarbutton-class"></a>CMFCToolBarButton 类

向工具栏提供按钮功能。

## <a name="syntax"></a>语法

```
class CMFCToolBarButton : public CObject
```

## <a name="members"></a>成员

### <a name="public-constructors"></a>公共构造函数

|名称|说明|
|----------|-----------------|
|[CMFCToolBarButton：： CMFCToolBarButton](#cmfctoolbarbutton)|构造并初始化一个 `CMFCToolBarButton` 对象。|
|`CMFCToolBarButton::~CMFCToolBarButton`|析构函数。|

### <a name="public-methods"></a>公共方法

|名称|说明|
|----------|-----------------|
|[CMFCToolBarButton：： CanBeDropped](#canbedropped)|指定用户是否可以在自定义过程中在工具栏或菜单上定位按钮。|
|[CMFCToolBarButton：： CanBeStored](#canbestored)|指定是否可以存储按钮。|
|[CMFCToolBarButton：： CanBeStretched](#canbestretched)|指定用户是否可以在自定义过程中拉伸该按钮。|
|[CMFCToolBarButton：： Seq.comparewith](#comparewith)|将此实例与所提供`CMFCToolBarButton`的对象进行比较。|
|[CMFCToolBarButton：： CopyFrom](#copyfrom)|将另一个工具栏按钮的属性复制到当前按钮。|
|[CMFCToolBarButton：： CreateFromOleData](#createfromoledata)|从提供`CMFCToolBarButton` `COleDataObject`的对象创建对象。|
|`CMFCToolBarButton::CreateObject`|由框架用于创建此类类型的动态实例。|
|[CMFCToolBarButton：： EnableWindow](#enablewindow)|启用或禁用鼠标和键盘输入。|
|[CMFCToolBarButton：： ExportToMenuButton](#exporttomenubutton)|将文本从工具栏按钮复制到菜单。|
|[CMFCToolBarButton：： GetClipboardFormat](#getclipboardformat)|检索应用程序的全局剪贴板格式。|
|[CMFCToolBarButton：： GetHwnd](#gethwnd)|检索与工具栏按钮关联的窗口句柄。|
|[CMFCToolBarButton：： GetImage](#getimage)|检索按钮的图像索引。|
|[CMFCToolBarButton：： GetInvalidateRect](#getinvalidaterect)|检索必须重绘的按钮工作区的区域。|
|[CMFCToolBarButton：： GetParentWnd](#getparentwnd)|检索按钮的父窗口。|
|[CMFCToolBarButton：： GetProtectedCommands](#getprotectedcommands)|检索用户无法自定义的命令的列表。|
|[CMFCToolBarButton：： GetTextSize](#gettextsize)|检索按钮文本的大小。|
|[CMFCToolBarButton：： HasFocus](#hasfocus)|确定按钮是否具有当前输入焦点。|
|[CMFCToolBarButton：： HaveHotBorder](#havehotborder)|确定当用户选择按钮时是否显示按钮的边框。|
|[CMFCToolBarButton：： IsDrawImage](#isdrawimage)|确定按钮上是否显示图像。|
|[CMFCToolBarButton：： IsDrawText](#isdrawtext)|确定按钮上是否显示文本标签。|
|[CMFCToolBarButton：： IsDroppedDown](#isdroppeddown)|确定按钮是否显示子菜单。|
|[CMFCToolBarButton：： IsEditable](#iseditable)|确定是否可以自定义按钮。|
|[CMFCToolBarButton：： IsExtraSize](#isextrasize)|确定是否可以使用扩展边框显示该按钮。|
|[CMFCToolBarButton：： IsFirstInGroup](#isfirstingroup)|确定按钮是否位于其按钮组中的第一个位置。|
|[CMFCToolBarButton：： IsHidden](#ishidden)|确定按钮是否处于隐藏状态。|
|[CMFCToolBarButton：： IsHorizontal](#ishorizontal)|确定按钮是否位于水平工具栏上。|
|[CMFCToolBarButton：： IsLastInGroup](#islastingroup)|指定按钮是否位于其按钮组中的最后一个位置。|
|[CMFCToolBarButton：： IsLocked](#islocked)|确定按钮是否位于 "锁定（不可自定义）" 工具栏上。|
|[CMFCToolBarButton：： IsOwnerOf](#isownerof)|确定按钮是否为所提供的窗口句柄的所有者。|
|[CMFCToolBarButton：： IsVisible](#isvisible)|确定工具栏按钮是否可见。|
|[CMFCToolBarButton：： IsWindowVisible](#iswindowvisible)|确定按钮的基础窗口句柄是否可见。|
|[CMFCToolBarButton：： NotifyCommand](#notifycommand)|指定按钮是否处理[WM_COMMAND](/windows/win32/menurc/wm-command)消息。|
|[CMFCToolBarButton：： OnAddToCustomizePage](#onaddtocustomizepage)|在将按钮添加到 "**自定义**" 对话框时由框架调用。|
|[CMFCToolBarButton：： OnBeforeDrag](#onbeforedrag)|指定是否可以拖动该按钮。|
|[CMFCToolBarButton：： OnBeforeDrop](#onbeforedrop)|指定用户是否可以将按钮拖放到目标工具栏中。|
|[CMFCToolBarButton：： OnCalculateSize](#oncalculatesize)|由框架调用，用于计算指定设备上下文和停靠状态的按钮大小。|
|[CMFCToolBarButton：： OnCancelMode](#oncancelmode)|由框架调用，用于处理[WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode)消息。|
|[CMFCToolBarButton：： OnChangeParentWnd](#onchangeparentwnd)|在将按钮插入新工具栏时由框架调用。|
|[CMFCToolBarButton：： OnClick](#onclick)|当用户单击鼠标按钮时由框架调用。|
|[CMFCToolBarButton：： OnClickUp](#onclickup)|当用户释放鼠标按钮时由框架调用。|
|[CMFCToolBarButton：： OnContextHelp](#oncontexthelp)|当父工具栏处理 WM_HELPHITTEST 消息时由框架调用。|
|[CMFCToolBarButton：： OnCtlColor](#onctlcolor)|当父工具栏处理 WM_CTLCOLOR 消息时由框架调用。|
|[CMFCToolBarButton：： OnCustomizeMenu](#oncustomizemenu)|当应用程序在父工具栏上显示快捷菜单时，允许该按钮修改提供的菜单。|
|[CMFCToolBarButton：： OnDblClk](#ondblclk)|当父工具栏处理[WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk)消息时由框架调用。|
|[CMFCToolBarButton：： OnDraw](#ondraw)|由框架调用，用于通过使用指定的样式和选项绘制按钮。|
|[CMFCToolBarButton：： OnDrawOnCustomizeList](#ondrawoncustomizelist)|由框架调用，用于绘制 "**自定义**" 对话框的 "**命令**" 窗格中的按钮。|
|[CMFCToolBarButton：： OnGetCustomToolTipText](#ongetcustomtooltiptext)|由框架调用以检索按钮的自定义工具提示文本。|
|[CMFCToolBarButton：： OnGlobalFontsChanged](#onglobalfontschanged)|当全局字体已更改时由框架调用。|
|[CMFCToolBarButton：： OnMove](#onmove)|当父工具栏移动时由框架调用。|
|[CMFCToolBarButton：： OnShow](#onshow)|当按钮变为可见或不可见时由框架调用。|
|[CMFCToolBarButton：： OnSize](#onsize)|当父工具栏更改其大小或位置并且此更改需要按钮更改大小时，由框架调用。|
|[CMFCToolBarButton：： OnToolHitTest](#ontoolhittest)|当父工具栏必须确定某个点是否在按钮的边框中时由框架调用。|
|[CMFCToolBarButton：： OnUpdateToolTip](#onupdatetooltip)|当父工具栏更新其工具提示文本时由框架调用。|
|[CMFCToolBarButton：:P repareDrag](#preparedrag)|当按钮即将执行拖放操作时，由框架调用。|
|[CMFCToolBarButton：： Rect](#rect)|检索按钮的边框。|
|[CMFCToolBarButton：： ResetImageToDefault](#resetimagetodefault)|将设置为与按钮关联的图像的默认值。|
|[CMFCToolBarButton：： SaveBarState](#savebarstate)|保存工具栏按钮的状态。|
|[CMFCToolBarButton：：串行化](#serialize)|从存档中读取此对象或将其写入存档。 （重写 [CObject::Serialize](../../mfc/reference/cobject-class.md#serialize)。）|
|[CMFCToolBarButton：： SetACCData](#setaccdata)|用工具栏按钮`CAccessibilityData`中的可访问性数据填充提供的对象。|
|[CMFCToolBarButton：： SetClipboardFormatName](#setclipboardformatname)|重命名全局剪贴板格式。|
|[CMFCToolBarButton：： SetImage](#setimage)|设置按钮的图像索引。|
|[CMFCToolBarButton：： SetProtectedCommands](#setprotectedcommands)|设置用户无法自定义的命令的列表。|
|[CMFCToolBarButton：： SetRadio](#setradio)|当按钮更改其选中状态时由框架调用。|
|[CMFCToolBarButton：： SetRect](#setrect)|设置按钮的边框。|
|[CMFCToolBarButton：： System.windows.forms.control.setstyle](#setstyle)|设置按钮的样式。|
|[CMFCToolBarButton：： SetVisible](#setvisible)|指定按钮是否可见。|
|[CMFCToolBarButton：： Show](#show)|显示或隐藏按钮。|

### <a name="data-members"></a>数据成员

|名称|说明|
|----------|-----------------|
|[CMFCToolBarButton：： m_bImage](#m_bimage)|指定是否在按钮上显示图像。|
|[CMFCToolBarButton：： m_bText](#m_btext)|指定是否在按钮上显示文本标签。|
|[CMFCToolBarButton：： m_bTextBelow](#m_btextbelow)|指定是否在按钮的图像下方显示文本标签。|
|[CMFCToolBarButton：： m_bUserButton](#m_buserbutton)|指定该按钮是否包含用户定义图像。|
|[CMFCToolBarButton：： m_bWholeText](#m_bwholetext)|指定按钮是否显示其完整文本标签，即使它不适合边框。|
|[CMFCToolBarButton：： m_bWrap](#m_bwrap)|指定是否将分隔符旁边的按钮放置在下一行。|
|[CMFCToolBarButton：： m_bWrapText](#m_bwraptext)|指定是否启用多行文本标签。|
|[CMFCToolBarButton：： m_nID](#m_nid)|按钮的命令 ID。|
|[CMFCToolBarButton：： m_nStyle](#m_nstyle)|按钮的样式。|
|[CMFCToolBarButton：： m_strText](#m_strtext)|按钮的文本标签。|

## <a name="remarks"></a>备注

`CMFCToolbarButton`对象是位于工具栏上的控件。 它的行为与普通按钮的行为类似。 您可以为此对象指定图像和文本标签。 工具栏按钮还可以具有命令 ID。 当用户单击工具栏按钮时，框架会执行该 ID 指定的命令。

通常，工具栏按钮可以自定义：用户可以将按钮从一个工具栏拖动到另一个工具栏，并复制、粘贴、删除和编辑文本标签和图像。 若要阻止用户自定义工具栏，可以通过以下两种方式之一锁定工具栏。 调用`bLocked` [CMFCToolBar：： LoadToolBar](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar)时，请将标志设置为 TRUE，或使用[CMFCToolBarButton：： SetProtectedCommands](#setprotectedcommands)方法将单个按钮的命令 ID 添加到受保护命令的全局列表。

`CMFCToolBarButton`对象显示应用程序中工具栏图像的全局集合中的图像。 这些集合由父工具栏[CMFCToolBar 类](../../mfc/reference/cmfctoolbar-class.md)维护。 有关详细信息，请参阅[CMFCToolBarImages 类](../../mfc/reference/cmfctoolbarimages-class.md)。

当用户单击工具栏按钮时，其父工具栏会处理鼠标消息，并将相应的操作传达给该按钮。 如果该按钮具有有效的命令 ID，则父工具栏会将 WM_COMMAND 消息发送到父框架。

`CMFCToolBarButton`类是其他工具栏按钮类（如[CMFCToolBarMenuButton 类](../../mfc/reference/cmfctoolbarmenubutton-class.md)、 [CMFCToolBarEditBoxButton 类](../../mfc/reference/cmfctoolbareditboxbutton-class.md)和[CMFCToolBarComboBoxButton 类](../../mfc/reference/cmfctoolbarcomboboxbutton-class.md)）的基类。

## <a name="example"></a>示例

下面的示例演示如何使用类中`CMFCToolBarButton`的`CMFCToolBarButton`各种方法配置对象。 该示例演示如何启用鼠标和键盘输入、设置按钮的图像索引、设置按钮的边框，并使按钮可见。 此代码片段是[选项卡控件示例](../../overview/visual-cpp-samples.md)的一部分。

[!code-cpp[NVC_MFC_TabControl#1](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_1.cpp)]
[!code-cpp[NVC_MFC_TabControl#2](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_2.cpp)]

## <a name="inheritance-hierarchy"></a>继承层次结构

[CObject](../../mfc/reference/cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

## <a name="requirements"></a>要求

**标头：** afxtoolbarbutton

## <a name="cmfctoolbarbuttoncanbedropped"></a><a name="canbedropped"></a>CMFCToolBarButton：： CanBeDropped

指定用户是否可以在自定义过程中在工具栏或菜单上定位按钮。

```
virtual BOOL CanBeDropped(CMFCToolBar* pToolbar);
```

### <a name="parameters"></a>参数

*pToolbar*<br/>
中用.

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

默认情况下，可以将工具栏按钮拖放到每个可自定义的（即未锁定）的工具栏。

此方法的默认实现返回 TRUE。 如果要阻止用户重新定位按钮，请重写此方法并返回 FALSE。

## <a name="cmfctoolbarbuttoncanbestored"></a><a name="canbestored"></a>CMFCToolBarButton：： CanBeStored

确定是否可以存储按钮。

```
virtual BOOL CanBeStored() const;
```

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

框架使用此方法来确定按钮是否可以参与拖放操作。

默认实现返回 TRUE。 如果无法将按钮作为拖放操作的一部分进行存储，则重写此方法。 有关拖放操作的详细信息，请参阅[OLE 拖放](../../mfc/drag-and-drop-ole.md)。

## <a name="cmfctoolbarbuttoncanbestretched"></a><a name="canbestretched"></a>CMFCToolBarButton：： CanBeStretched

指定用户是否可以在自定义过程中拉伸该按钮。

```
virtual BOOL CanBeStretched() const;
```

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

框架使用此方法来确定按钮是否可以在自定义模式下拉伸。

此方法的默认实现返回 FALSE。 重写此方法可为可变宽度控件（如组合框或滑块）返回 TRUE。

有关自定义模式的详细信息，请参阅[CMFCToolBar：： SetCustomizeMode](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode)。

## <a name="cmfctoolbarbuttoncmfctoolbarbutton"></a><a name="cmfctoolbarbutton"></a>CMFCToolBarButton：： CMFCToolBarButton

构造并初始化一个 `CMFCToolBarButton` 对象。

```
CMFCToolBarButton(
    UINT uiID,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE,
    BOOL bLocked=FALSE);
```

### <a name="parameters"></a>参数

*uiID*<br/>
中按钮的命令 ID。

*iImage*<br/>
中图像集合中的按钮的图像索引。

*lpszText*<br/>
中按钮的文本标签。 可以为 NULL。

*bUserButton*<br/>
中确定按钮是否是用户定义的布尔值。 如果此参数为 TRUE，则按钮是用户定义的。 否则，会从资源加载按钮图像。

*对方*<br/>
中确定按钮是否可以自定义的布尔值。 如果此参数为 TRUE，则无法自定义该按钮。 否则，可以自定义该按钮。

## <a name="cmfctoolbarbuttoncomparewith"></a><a name="comparewith"></a>CMFCToolBarButton：： Seq.comparewith

将此实例与所提供`CMFCToolBarButton`的对象进行比较。

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>参数

*以外*<br/>
中对要与此实例进行比较的对象的引用。

### <a name="return-value"></a>返回值

如果提供的对象等于此实例的值，则为非零值;否则为0。

### <a name="remarks"></a>备注

默认实现确定所提供对象的命令 ID 是否等于此实例的命令 ID。 若要确定两个`CMFCToolBarButton`对象是否相等，请重写此方法。

## <a name="cmfctoolbarbuttoncopyfrom"></a><a name="copyfrom"></a>CMFCToolBarButton：： CopyFrom

将另一个工具栏按钮的属性复制到当前按钮。

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>参数

*src*<br/>
中对要从中进行复制的源按钮的引用。

### <a name="remarks"></a>备注

调用此方法可将另一个工具栏按钮复制到此工具栏按钮。

## <a name="cmfctoolbarbuttoncreatefromoledata"></a><a name="createfromoledata"></a>CMFCToolBarButton：： CreateFromOleData

从提供`CMFCToolBarButton` `COleDataObject`的对象创建对象。

```
static CMFCToolBarButton* __stdcall CreateFromOleData(COleDataObject* pDataObject);
```

### <a name="parameters"></a>参数

*pDataObject*<br/>
中源 OLE 数据对象。

### <a name="return-value"></a>返回值

创建的 `CMFCToolBarButton` 对象。

### <a name="remarks"></a>备注

此方法由框架用于执行各种格式的数据传输。 例如， `CMFCOutlookBarPane::OnDragOver`方法使用此方法来执行拖放操作。

## <a name="cmfctoolbarbuttonenablewindow"></a><a name="enablewindow"></a>CMFCToolBarButton：： EnableWindow

启用或禁用鼠标和键盘输入。

```
virtual void EnableWindow(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>参数

*bEnable*<br/>
中将此参数设置为 TRUE 可启用输入，或设置为 FALSE 可禁用输入。

### <a name="remarks"></a>备注

此方法调用`EnableWindow`函数以启用或禁用输入。 有关详细信息，请参阅 Windows SDK 中的[EnableWindow](/windows/win32/api/winuser/nf-winuser-enablewindow) 。

## <a name="cmfctoolbarbuttonexporttomenubutton"></a><a name="exporttomenubutton"></a>CMFCToolBarButton：： ExportToMenuButton

将文本从工具栏按钮复制到菜单。

```
virtual BOOL ExportToMenuButton(CMFCToolBarMenuButton& menuButton) const;
```

### <a name="parameters"></a>参数

*menuButton*<br/>
中对 "目标" 菜单按钮的引用。

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

框架调用此方法将文本从工具栏按钮复制到菜单按钮。 默认实现复制按钮的文本标签。 如果文本标签为空，则此方法将复制按钮的工具提示文本。

此方法的默认实现返回 TRUE。 如果要在框架将派生自[CMFCToolbarButton](../../mfc/reference/cmfctoolbarbutton-class.md)的对象转换为菜单按钮时执行其他操作，请重写此方法。

## <a name="cmfctoolbarbuttongetclipboardformat"></a><a name="getclipboardformat"></a>CMFCToolBarButton：： GetClipboardFormat

检索应用程序的全局剪贴板格式。

```
static CLIPFORMAT __stdcall GetClipboardFormat();
```

### <a name="return-value"></a>返回值

应用程序的全局 CLIPFORMAT 值。

### <a name="remarks"></a>备注

框架调用此方法来检索 OLE 数据传输操作的剪贴板格式。 例如， [CMFCToolBarButton：： CreateFromOleData](#createfromoledata)方法使用此方法从源 OLE 数据对象复制数据。

此方法在第一次调用此方法时设置全局 CLIPFORMAT 值。 对此方法的所有后续调用都将返回此值。

若要允许在应用程序之间执行拖放操作，请调用[CMFCToolBarButton：： SetClipboardFormatName](#setclipboardformatname)方法。

有关 MFC 中的剪贴板的详细信息，请参阅[剪贴板](../../mfc/clipboard.md)。

## <a name="cmfctoolbarbuttongethwnd"></a><a name="gethwnd"></a>CMFCToolBarButton：： GetHwnd

检索与工具栏按钮关联的窗口句柄。

```
virtual HWND GetHwnd();
```

### <a name="return-value"></a>返回值

与工具栏按钮关联的窗口句柄，如果工具栏按钮没有关联的窗口句柄，则为 NULL。

### <a name="remarks"></a>备注

此方法的默认实现返回 NULL。 重写此方法以返回特定控件的窗口句柄。

## <a name="cmfctoolbarbuttongetimage"></a><a name="getimage"></a>CMFCToolBarButton：： GetImage

检索按钮的图像索引。

```
int GetImage() const;
```

### <a name="return-value"></a>返回值

与此按钮关联的图像的索引。

### <a name="remarks"></a>备注

如果该按钮具有用户定义的图像（即，如果在构造函数中为 TRUE，则在构造函数中为*bUserButton* ），则返回的索引将指定用户定义的图像集合中的图像（请参阅[CMFCToolBar：： GetUserImages](../../mfc/reference/cmfctoolbar-class.md#getuserimages)）。 否则，索引将在从资源文件加载的图像集合中指定图像（请参阅[CMFCToolBar：： GetImages](../../mfc/reference/cmfctoolbar-class.md#getimages)）。 有关资源文件的详细信息，请参阅使用[资源文件](../../windows/working-with-resource-files.md)。

## <a name="cmfctoolbarbuttongetinvalidaterect"></a><a name="getinvalidaterect"></a>CMFCToolBarButton：： GetInvalidateRect

检索必须重绘的按钮工作区的区域。

```
virtual const CRect GetInvalidateRect() const;
```

### <a name="return-value"></a>返回值

一个`CRect`对象，该对象指定必须重新绘制的区域。

### <a name="remarks"></a>备注

此方法的默认实现将返回整个工作区。 如果希望重绘不同的区域，请重写此方法。

## <a name="cmfctoolbarbuttongetparentwnd"></a><a name="getparentwnd"></a>CMFCToolBarButton：： GetParentWnd

检索按钮的父窗口。

```
CWnd* GetParentWnd() const;
```

### <a name="return-value"></a>返回值

按钮的父窗口。

## <a name="cmfctoolbarbuttongetprotectedcommands"></a><a name="getprotectedcommands"></a>CMFCToolBarButton：： GetProtectedCommands

检索用户无法自定义的命令的列表。

```
static const CList<UINT,UINT>& GetProtectedCommands();
```

### <a name="return-value"></a>返回值

受保护命令的列表。

### <a name="remarks"></a>备注

在自定义模式下，框架禁用受保护的工具栏按钮命令。 用户不能对禁用的工具栏按钮执行拖放和编辑操作。

使用[CMFCToolBarButton：： SetProtectedCommands](#setprotectedcommands)方法定义受保护命令的列表。

## <a name="cmfctoolbarbuttongettextsize"></a><a name="gettextsize"></a>CMFCToolBarButton：： GetTextSize

检索按钮文本的大小。

```
SIZE GetTextSize() const;
```

### <a name="return-value"></a>返回值

一个大小对象，其中包含按钮文本的大小（以像素为单位）。

## <a name="cmfctoolbarbuttonhasfocus"></a><a name="hasfocus"></a>CMFCToolBarButton：： HasFocus

确定按钮是否具有当前输入焦点。

```
virtual BOOL HasFocus() const;
```

### <a name="return-value"></a>返回值

如果按钮具有输入焦点，则为非零值;否则为0。

### <a name="remarks"></a>备注

此方法的默认实现将返回非零值，如果该按钮具有输入焦点或者是具有输入焦点的窗口的子窗口或子窗口。 您可以重写此函数以自定义此行为。

## <a name="cmfctoolbarbuttonhavehotborder"></a><a name="havehotborder"></a>CMFCToolBarButton：： HaveHotBorder

确定当用户选择按钮时是否显示按钮的边框。

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

框架调用此方法来确定当用户选择工具栏按钮时，该按钮是否应显示边框。

默认实现返回 TRUE。 您可以重写此方法以自定义此行为。

## <a name="cmfctoolbarbuttonisdrawimage"></a><a name="isdrawimage"></a>CMFCToolBarButton：： IsDrawImage

确定按钮上是否显示图像。

```
BOOL IsDrawImage() const;
```

### <a name="return-value"></a>返回值

如果在按钮上显示图像，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果工具栏按钮没有关联的图像（ [CMFCToolBarButton：： GetImage](#getimage)返回-1）或[CMFCToolBarButton：： M_BIMAGE](#m_bimage)设置为 false，则此方法返回 false。

## <a name="cmfctoolbarbuttonisdrawtext"></a><a name="isdrawtext"></a>CMFCToolBarButton：： IsDrawText

确定按钮上是否显示文本标签。

```
BOOL IsDrawText() const;
```

### <a name="return-value"></a>返回值

如果显示文本标签，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果工具栏按钮没有关联的文本标签（ [CMFCToolBarButton：： m_strText](#m_strtext)为空）或[CMFCToolBarButton：： M_BTEXT](#m_btext)设置为 false，则此方法返回 false。

## <a name="cmfctoolbarbuttonisdroppeddown"></a><a name="isdroppeddown"></a>CMFCToolBarButton：： IsDroppedDown

确定按钮是否显示子菜单。

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法的默认实现返回 FALSE。 如果控件显示子菜单，则重写此方法以返回 TRUE。

## <a name="cmfctoolbarbuttoniseditable"></a><a name="iseditable"></a>CMFCToolBarButton：： IsEditable

确定是否可以自定义按钮。

```
virtual BOOL IsEditable() const;
```

### <a name="return-value"></a>返回值

如果用户可以自定义按钮，则为非零值;否则为0。

### <a name="remarks"></a>备注

框架调用此方法以确定用户是否可以通过使用拖放操作或编辑操作来自定义工具栏按钮。

如果按钮的命令 ID 是标准命令（可以通过调用`IsStandardCommand`函数来确定这一点），或者如果命令 id 位于受保护的命令列表中，则默认实现将返回 FALSE。 有关受保护的命令的详细信息，请参阅[CMFCToolBarButton：： GetProtectedCommands](#getprotectedcommands)和[CMFCToolBarButton：： SetProtectedCommands](#setprotectedcommands)。

重写此方法以自定义其行为。

## <a name="cmfctoolbarbuttonisextrasize"></a><a name="isextrasize"></a>CMFCToolBarButton：： IsExtraSize

确定是否可以使用扩展边框显示该按钮。

```
virtual BOOL IsExtraSize() const;
```

### <a name="return-value"></a>返回值

如果可以使用扩展边框显示工具栏按钮，则为非零值;否则为0。

### <a name="remarks"></a>备注

多个外观使用工具栏按钮边框的额外尺寸（例如，圆形按钮）。

如果用户将此按钮从一个工具栏移到另一个工具栏，则框架将调用[CMFCToolBarButton：： OnChangeParentWnd](#onchangeparentwnd)方法。 [CMFCToolBarButton：： OnChangeParentWnd](#onchangeparentwnd)方法将额外的大小标志设置为新父工具栏的大小标志（有关详细信息，请参阅[CMFCToolBar：： IsButtonExtraSizeAvailable](../../mfc/reference/cmfctoolbar-class.md#isbuttonextrasizeavailable)）。

## <a name="cmfctoolbarbuttonisfirstingroup"></a><a name="isfirstingroup"></a>CMFCToolBarButton：： IsFirstInGroup

确定按钮是否位于其按钮组中的第一个位置。

```
virtual BOOL IsFirstInGroup() const;
```

### <a name="return-value"></a>返回值

如果按钮是按钮组中的第一个按钮，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

此方法将一个*按钮组*定义为相邻的一组按钮，这些按钮位于同一行上，并通过分隔符或工具栏的边框进行绑定。 如果工具栏按钮引用 "**自定义**" 按钮，则此方法返回 FALSE。 有关 "**自定义**" 按钮的详细信息，请参阅[CMFCToolBar：： GetCustomizeButton](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton)。

调用[CMFCToolBarButton：： IsLastInGroup](#islastingroup)方法来确定按钮是否位于其按钮组中的最后一个位置。

## <a name="cmfctoolbarbuttonishidden"></a><a name="ishidden"></a>CMFCToolBarButton：： IsHidden

确定按钮是否处于隐藏状态。

```
BOOL IsHidden() const;
```

### <a name="return-value"></a>返回值

如果按钮处于隐藏状态，则为非零值;否则为0。

### <a name="remarks"></a>备注

当拉伸父工具栏以确定工具栏按钮是否可见时，框架会调用此方法。

如果使用[CMFCToolBarButton：： SetVisible](#setvisible)方法将按钮设置为不可见，请使用[CMFCToolBarButton：： IsVisible](#isvisible)来确定工具栏按钮是否可见。

默认情况下，所有工具栏按钮都可见。 使用[CMFCToolBarButton：： Show](#show)方法隐藏或显示工具栏按钮。

## <a name="cmfctoolbarbuttonishorizontal"></a><a name="ishorizontal"></a>CMFCToolBarButton：： IsHorizontal

确定按钮是否位于水平工具栏上。

```
BOOL IsHorizontal() const;
```

### <a name="return-value"></a>返回值

如果工具栏按钮位于水平工具栏上，则为非零值;否则为0。

### <a name="remarks"></a>备注

框架调用此方法来确定工具栏按钮的布局。

此方法返回`m_bHorz`数据成员。 `m_bHorz`数据成员的默认值为 TRUE;它将在每次调用[CMFCToolBarButton：： OnDraw](#ondraw)方法时重置。

## <a name="cmfctoolbarbuttonislastingroup"></a><a name="islastingroup"></a>CMFCToolBarButton：： IsLastInGroup

指定按钮是否位于其按钮组中的最后一个位置。

```
virtual BOOL IsLastInGroup() const;
```

### <a name="return-value"></a>返回值

如果按钮是按钮组中的最后一个按钮，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

此方法将一个*按钮组*定义为相邻的一组按钮，这些按钮位于同一行上，并通过分隔符或工具栏的边框进行绑定。如果工具栏按钮没有父工具栏或工具栏按钮引用 "**自定义**" 按钮，则此方法返回 FALSE。 有关 "**自定义**" 按钮的详细信息，请参阅[CMFCToolBar：： GetCustomizeButton](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton)。

调用[CMFCToolBarButton：： IsFirstInGroup](#isfirstingroup)方法来确定按钮是否位于其按钮组中的第一个位置。

## <a name="cmfctoolbarbuttonislocked"></a><a name="islocked"></a>CMFCToolBarButton：： IsLocked

确定按钮是否位于 "锁定（不可自定义）" 工具栏上。

```
BOOL IsLocked() const;
```

### <a name="return-value"></a>返回值

如果按钮位于锁定工具栏上，则为非零值;否则为0。

### <a name="remarks"></a>备注

框架调用此方法以确定用户是否可以通过使用拖放操作或编辑操作来自定义工具栏按钮。 使用[CMFCToolBar：： LoadToolBar](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar)方法设置父工具栏上的锁定特性。 框架将此属性的值传递给它在父工具栏中插入的每个工具栏按钮（ [CMFCToolbarButton](../../mfc/reference/cmfctoolbarbutton-class.md)）的构造函数。

## <a name="cmfctoolbarbuttonisownerof"></a><a name="isownerof"></a>CMFCToolBarButton：： IsOwnerOf

确定按钮是否为所提供的窗口句柄的所有者。

```
virtual BOOL IsOwnerOf(HWND hwnd);
```

### <a name="parameters"></a>参数

*hwnd*<br/>
中窗口句柄。

### <a name="return-value"></a>返回值

如果按钮是所提供的窗口句柄的所有者，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果*hwnd*引用直接窗口句柄，或者是与该按钮关联的窗口句柄的子句柄，则此方法返回非零值。 如果*hwnd*为 NULL，则此方法返回0。

## <a name="cmfctoolbarbuttonisvisible"></a><a name="isvisible"></a>CMFCToolBarButton：： IsVisible

确定工具栏按钮是否可见。

```
BOOL IsVisible() const;
```

### <a name="return-value"></a>返回值

如果工具栏按钮可见，则为非零值;否则为0。

### <a name="remarks"></a>备注

您可以使用[CMFCToolBarButton：： SetVisible](#setvisible)方法显示或隐藏工具栏按钮。 调用[CMFCToolBarButton：： SetVisible](#setvisible)后，调用父工具栏上的[CPane：： AdjustSizeImmediate](../../mfc/reference/cpane-class.md#adjustsizeimmediate)方法来重新计算父工具栏的布局。

## <a name="cmfctoolbarbuttoniswindowvisible"></a><a name="iswindowvisible"></a>CMFCToolBarButton：： IsWindowVisible

确定按钮的基础窗口句柄是否可见。

```
virtual BOOL IsWindowVisible();
```

### <a name="return-value"></a>返回值

如果按钮的基础窗口句柄可见，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果基础窗口句柄的 style 特性包含 WS_VISIBLE 样式，此方法将返回非零值。 如果按钮的基础窗口句柄为 NULL，则此方法返回 FALSE。

## <a name="cmfctoolbarbuttonm_bimage"></a><a name="m_bimage"></a>CMFCToolBarButton：： m_bImage

指定是否在按钮上显示图像。

```
BOOL m_bImage;
```

### <a name="remarks"></a>备注

如果此数据成员设置为 TRUE，则框架将显示与工具栏按钮关联的图像;否则，框架不会显示图像。 此成员影响[CMFCToolBarButton：： m_bImage](#m_bimage)方法的返回值。

## <a name="cmfctoolbarbuttonm_btext"></a><a name="m_btext"></a>CMFCToolBarButton：： m_bText

指定是否在按钮上显示文本标签。

```
BOOL m_bText;
```

### <a name="remarks"></a>备注

如果此数据成员设置为 TRUE，则框架将显示工具栏按钮的文本标签;否则，框架不会显示文本标签。 此成员影响[CMFCToolBarButton：： m_bText](#m_btext)方法的返回值。

## <a name="cmfctoolbarbuttonm_btextbelow"></a><a name="m_btextbelow"></a>CMFCToolBarButton：： m_bTextBelow

指定是否在按钮的图像下方显示文本标签。

```
BOOL m_bTextBelow;
```

### <a name="remarks"></a>备注

如果此成员变量设置为 TRUE，则框架将在图像下显示该按钮的文本。 此成员的默认值为 FALSE。

## <a name="cmfctoolbarbuttonm_buserbutton"></a><a name="m_buserbutton"></a>CMFCToolBarButton：： m_bUserButton

指定按钮是否包含用户定义的图像

```
BOOL m_bUserButton;
```

### <a name="remarks"></a>备注

当该按钮具有与之关联的用户定义图像时，此数据成员设置为 TRUE。

## <a name="cmfctoolbarbuttonm_bwholetext"></a><a name="m_bwholetext"></a>CMFCToolBarButton：： m_bWholeText

指定按钮是否显示其完整文本标签，即使它不适合边框。

```
BOOL m_bWholeText;
```

### <a name="remarks"></a>备注

如果此数据成员设置为 TRUE，则框架通过放大按钮来显示全文标签。 否则，框架将截断并将省略号（ **...**）追加到文本标签。

## <a name="cmfctoolbarbuttonm_bwrap"></a><a name="m_bwrap"></a>CMFCToolBarButton：： m_bWrap

指定是否将分隔符旁边的按钮放置在下一行。

```
BOOL m_bWrap;
```

### <a name="remarks"></a>备注

当工具栏按钮无法适应当前行或指定布局时（例如，每行特定数量的工具栏按钮），框架将此数据成员设置为 TRUE。

如果此数据成员设置为 TRUE 并且工具栏是水平或浮动的，则框架将此按钮置于下一行。

此数据成员的默认值为 FALSE。

## <a name="cmfctoolbarbuttonm_bwraptext"></a><a name="m_bwraptext"></a>CMFCToolBarButton：： m_bWrapText

指定是否启用多行文本标签。

```
AFX_IMPORT_DATA static BOOL m_bWrapText;
```

### <a name="remarks"></a>备注

如果此静态成员变量为 TRUE，则框架允许所有工具栏在工具栏按钮上显示多行文本标签。

此数据成员的默认值为 FALSE。

## <a name="cmfctoolbarbuttonm_nid"></a><a name="m_nid"></a>CMFCToolBarButton：： m_nID

按钮的命令 ID。

```
UINT m_nID;
```

### <a name="remarks"></a>备注

命令 ID-1 指示该按钮为分隔符。 所有按钮分隔符都具有 TBBS_SEPARATOR 样式。 有关按钮样式的详细信息，请参阅[CMFCToolBarButton：： m_nStyle](#m_nstyle) 。

## <a name="cmfctoolbarbuttonm_nstyle"></a><a name="m_nstyle"></a>CMFCToolBarButton：： m_nStyle

按钮的样式。

```
UINT m_nStyle;
```

### <a name="remarks"></a>备注

有关可用工具栏按钮样式的列表，请参阅[Toolbar 控件样式](../../mfc/reference/toolbar-control-styles.md)。

## <a name="cmfctoolbarbuttonm_strtext"></a><a name="m_strtext"></a>CMFCToolBarButton：： m_strText

按钮的文本标签。

```
CString m_strText;
```

### <a name="remarks"></a>备注

此数据成员包含按钮的文本标签。 文本标签可以为空。

## <a name="cmfctoolbarbuttonnotifycommand"></a><a name="notifycommand"></a>CMFCToolBarButton：： NotifyCommand

指定按钮是否处理[WM_COMMAND](/windows/win32/menurc/wm-command)消息。

```
virtual BOOL NotifyCommand(int iNotifyCode);
```

### <a name="parameters"></a>参数

*iNotifyCode*<br/>
中与命令关联的通知消息。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

当框架即将向父窗口发送[WM_COMMAND](/windows/win32/menurc/wm-command)消息时，框架会调用此方法。

默认情况下，此方法返回 FALSE。 如果要处理 WM_COMMAND 消息，则重写此方法以返回 TRUE，否则将返回 FALSE，以指示父工具栏应处理该消息。

## <a name="cmfctoolbarbuttononaddtocustomizepage"></a><a name="onaddtocustomizepage"></a>CMFCToolBarButton：： OnAddToCustomizePage

在将按钮添加到 "**自定义**" 对话框时由框架调用。

```
virtual void OnAddToCustomizePage();
```

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 如果要在将按钮添加到 "**自定义**" 对话框中时执行某个操作，请重写此方法。

## <a name="cmfctoolbarbuttononbeforedrag"></a><a name="onbeforedrag"></a>CMFCToolBarButton：： OnBeforeDrag

指定是否可以拖动该按钮。

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>返回值

如果可以拖动按钮，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

框架在用户开始拖动按钮之前调用此方法。

此方法的默认实现返回 TRUE。 重写此方法以返回 FALSE 以禁止拖动按钮。

## <a name="cmfctoolbarbuttononbeforedrop"></a><a name="onbeforedrop"></a>CMFCToolBarButton：： OnBeforeDrop

指定用户是否可以将按钮拖放到目标工具栏中。

```
virtual BOOL OnBeforeDrop(CMFCToolBar* pTarget);
```

### <a name="parameters"></a>参数

*pTarget*<br/>
中拖放操作的目标。

### <a name="return-value"></a>返回值

如果可以将按钮拖放到所提供的目标工具栏上，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

框架在按钮拖放到工具栏之前调用此方法。

此方法的默认实现返回 TRUE。 重写此方法以返回 FALSE，以禁用对指定目标的删除操作。

## <a name="cmfctoolbarbuttononcalculatesize"></a><a name="oncalculatesize"></a>CMFCToolBarButton：： OnCalculateSize

由框架调用，用于计算指定设备上下文和停靠状态的按钮大小。

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>参数

*pDC*<br/>
中显示按钮的设备上下文。

*sizeDefault*<br/>
中按钮的默认大小。

*bHorz*<br/>
中父工具栏的停靠状态。 如果工具栏水平停靠或浮动，则此参数为 TRUE; 如果工具栏垂直停靠，则为 FALSE。

### <a name="return-value"></a>返回值

一个`SIZE`结构，它包含按钮的尺寸（以像素为单位）。

### <a name="remarks"></a>备注

框架调用此方法来确定工具栏按钮在指定设备上下文和停靠状态下的大小。

默认实现会考虑文本大小和图像大小（如果显示）、文本和图像位置（图像下方或右侧的文本）和工具栏停靠状态。

如果希望提供非标准按钮（例如，编辑框按钮）的大小，请重写此方法。

## <a name="cmfctoolbarbuttononcancelmode"></a><a name="oncancelmode"></a>CMFCToolBarButton：： OnCancelMode

由框架调用，用于处理[WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode)消息。

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 如果要处理[WM_CANCELMODE](/windows/win32/winmsg/wm-cancelmode)消息，请重写此方法。

## <a name="cmfctoolbarbuttononchangeparentwnd"></a><a name="onchangeparentwnd"></a>CMFCToolBarButton：： OnChangeParentWnd

在将按钮插入新工具栏时由框架调用。

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>参数

*pWndParent*<br/>
中新的父窗口。

### <a name="remarks"></a>备注

将按钮插入工具栏，例如当用户将其从一个工具栏拖动到另一个工具栏时。

此方法的默认实现不执行任何操作。

## <a name="cmfctoolbarbuttononclick"></a><a name="onclick"></a>CMFCToolBarButton：： OnClick

当用户单击鼠标按钮时由框架调用。

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay=TRUE);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
中工具栏按钮的父窗口。

*bDelay*<br/>
中如果应使用延迟处理消息，则为 TRUE。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

用户单击工具栏按钮时，框架会调用此方法。

默认实现不执行任何操作并返回 FALSE。 重写此方法以在按钮处理单击消息时返回一个非零值。

## <a name="cmfctoolbarbuttononclickup"></a><a name="onclickup"></a>CMFCToolBarButton：： OnClickUp

当用户释放鼠标按钮时由框架调用。

```
virtual BOOL OnClickUp();
```

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

当用户释放工具栏按钮时，框架会调用此方法。

默认实现不执行任何操作并返回 FALSE。 重写此方法以在按钮处理单击消息时返回一个非零值。

## <a name="cmfctoolbarbuttononcontexthelp"></a><a name="oncontexthelp"></a>CMFCToolBarButton：： OnContextHelp

当父工具栏处理 WM_HELPHITTEST 消息时由框架调用。

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
中工具栏按钮的父窗口。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作并返回 FALSE。 重写此方法以在按钮处理帮助消息时返回一个非零值。

有关 WM_HELPHITTEST 消息的详细信息，请参阅[TN028：区分上下文的帮助支持](../../mfc/tn028-context-sensitive-help-support.md)。

## <a name="cmfctoolbarbuttononctlcolor"></a><a name="onctlcolor"></a>CMFCToolBarButton：： OnCtlColor

当父工具栏处理 WM_CTLCOLOR 消息时由框架调用。

```
virtual HBRUSH OnCtlColor(
    CDC* pDC,
    UINT nCtlColor);
```

### <a name="parameters"></a>参数

*pDC*<br/>
中显示按钮的设备上下文。

*nCtlColor*<br/>
中特定的颜色通知。

### <a name="return-value"></a>返回值

框架用于绘制按钮背景的画笔对象的句柄。

### <a name="remarks"></a>备注

当父工具栏处理包含 Windows 控件的工具栏按钮的 WM_CTLCOLOR 消息时，框架会调用此方法。 如果工具栏按钮为无窗口，框架不会调用此方法。

当工具栏框架处于自定义模式并且工具栏按钮处于解锁状态时，框架会调用此方法。 有关自定义模式的详细信息，请参阅[CMFCToolBar：： SetCustomizeMode](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode)。 有关锁定工具栏按钮的详细信息，请参阅[CMFCToolBarButton：： IsLocked](#islocked)。

默认实现不执行任何操作，并返回 NULL。

## <a name="cmfctoolbarbuttononcustomizemenu"></a><a name="oncustomizemenu"></a>CMFCToolBarButton：： OnCustomizeMenu

当应用程序在父工具栏上显示快捷菜单时，允许该按钮修改提供的菜单。

```
virtual BOOL OnCustomizeMenu(CMenu* pMenu);
```

### <a name="parameters"></a>参数

*pMenu*<br/>
中要自定义的菜单。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

默认实现不执行任何操作并返回 FALSE。 如果要修改所提供菜单的内容，请重写此方法并返回一个非零值。

## <a name="cmfctoolbarbuttonondblclk"></a><a name="ondblclk"></a>CMFCToolBarButton：： OnDblClk

当父工具栏处理[WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk)消息时由框架调用。

```
virtual void OnDblClk(CWnd* pWnd);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
[in]-按钮的父窗口。

### <a name="remarks"></a>备注

当父工具栏处理[WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk)消息`CMFCToolBar::OnLButtonDblClk`时，方法将调用此方法。

此方法的默认实现不执行任何操作。

## <a name="cmfctoolbarbuttonondraw"></a><a name="ondraw"></a>CMFCToolBarButton：： OnDraw

由框架调用，用于通过使用指定的样式和选项绘制按钮。

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz=TRUE,
    BOOL bCustomizeMode=FALSE,
    BOOL bHighlight=FALSE,
    BOOL bDrawBorder=TRUE,
    BOOL bGrayDisabledButtons=TRUE);
```

### <a name="parameters"></a>参数

*pDC*<br/>
中显示按钮的设备上下文。

*rect*<br/>
中按钮的边框。

*pImages*<br/>
中与按钮相关联的工具栏图像的集合。

*bHorz*<br/>
中父工具栏的停靠状态。 当按钮水平停靠时，此参数为 TRUE，当按钮垂直停靠时，此参数为 FALSE。

*bCustomizeMode*<br/>
中指定工具栏是否处于自定义模式。 此参数在工具栏处于自定义模式时为 TRUE，当工具栏未处于自定义模式时为 FALSE。

*bHighlight*<br/>
中指定按钮是否突出显示。 当按钮突出显示时，此参数为 TRUE; 如果未突出显示该按钮，则为 FALSE。

*bDrawBorder*<br/>
中指定按钮是否应显示其边框。 当按钮应显示其边框时，此参数为 TRUE，当按钮不应显示边框时，此参数为 FALSE。

*bGrayDisabledButtons*<br/>
中指定是对禁用的按钮进行着色还是使用禁用的图像集合。 如果禁用的按钮应为灰显，此参数为 TRUE，此方法应使用禁用的图像集合。

### <a name="remarks"></a>备注

重写此方法以自定义工具栏按钮绘图。

## <a name="cmfctoolbarbuttonondrawoncustomizelist"></a><a name="ondrawoncustomizelist"></a>CMFCToolBarButton：： OnDrawOnCustomizeList

由框架调用，用于绘制 "**自定义**" 对话框的 "**命令**" 窗格中的按钮。

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>参数

*pDC*<br/>
中显示按钮的设备上下文。

*rect*<br/>
中按钮的边框。

*bSelected*<br/>
中指定是否选择该按钮。 如果此参数为 TRUE，则选择此按钮。 如果此参数为 FALSE，则不选择此按钮。

### <a name="return-value"></a>返回值

指定的设备上下文上的按钮的宽度（以像素为单位）。

### <a name="remarks"></a>备注

当 "自定义" 对话框（"**命令**" 选项卡）在 "所有者描述" 列表框中显示自己时，将调用此方法。

此方法的默认实现显示按钮的图像和文本标签（如果可用）。 如果按钮的文本标签不可用，则方法会显示工具提示文本。

重写此方法以执行自定义绘制。

## <a name="cmfctoolbarbuttonongetcustomtooltiptext"></a><a name="ongetcustomtooltiptext"></a>CMFCToolBarButton：： OnGetCustomToolTipText

由框架调用以检索按钮的自定义工具提示文本。

```
virtual BOOL OnGetCustomToolTipText(CString& strToolTip);
```

### <a name="parameters"></a>参数

*strToolTip*<br/>
弄接收`CString`自定义工具提示文本的对象。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

当框架显示工具栏按钮的工具提示时，框架会调用此方法。 如果此方法返回 FALSE，则框架将使用默认工具提示。

默认实现不执行任何操作并返回 FALSE。 重写此方法并返回一个非零值，为工具栏按钮提供自定义工具提示文本。

## <a name="cmfctoolbarbuttononglobalfontschanged"></a><a name="onglobalfontschanged"></a>CMFCToolBarButton：： OnGlobalFontsChanged

当全局字体已更改时由框架调用。

```
virtual void OnGlobalFontsChanged();
```

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 重写此方法以更新用于显示按钮文本的字体。

## <a name="cmfctoolbarbuttononmove"></a><a name="onmove"></a>CMFCToolBarButton：： OnMove

当父工具栏移动时由框架调用。

```
virtual void OnMove();
```

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 重写此方法，以便在父工具栏移动时重定位按钮。

## <a name="cmfctoolbarbuttononshow"></a><a name="onshow"></a>CMFCToolBarButton：： OnShow

当按钮变为可见或不可见时由框架调用。

```
virtual void OnShow(BOOL bShow);
```

### <a name="parameters"></a>参数

*bShow*<br/>
中指定按钮是否可见。 如果此参数为 TRUE，则该按钮可见。 否则，该按钮将不可见。

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 重写此方法以更新按钮的可见性。

## <a name="cmfctoolbarbuttononsize"></a><a name="onsize"></a>CMFCToolBarButton：： OnSize

当父工具栏更改其大小或位置并且此更改导致按钮更改大小时，由框架调用。

```
virtual void OnSize(int iSize);
```

### <a name="parameters"></a>参数

*iSize*<br/>
中按钮的新宽度。

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 重写此方法，以在父工具栏的大小或位置更改时调整按钮大小。

## <a name="cmfctoolbarbuttonontoolhittest"></a><a name="ontoolhittest"></a>CMFCToolBarButton：： OnToolHitTest

当父工具栏必须确定某个点是否在按钮的边框中时由框架调用。

```
virtual BOOL OnToolHitTest(
    const CWnd* pWnd,
    TOOLINFO* pTI);
```

### <a name="parameters"></a>参数

*pWnd*<br/>
中按钮的父窗口。 可以为 NULL。

*pTI*<br/>
中一个`TOOLINFO`结构，它包含 tooltip 控件中的工具的相关信息。

### <a name="return-value"></a>返回值

`OnMenuButtonToolHitTest`如果按钮可以检索指向父框架窗口的指针，则为的结果;否则为 FALSE。

### <a name="remarks"></a>备注

如果可以将父窗口转换为有效的帧对象，则此方法将调用以下方法之一：

- [CMDIFrameWndEx：： OnMenuButtonToolHitTest](../../mfc/reference/cmdiframewndex-class.md#onmenubuttontoolhittest)

- [CFrameWndEx：： OnMenuButtonToolHitTest](../../mfc/reference/cframewndex-class.md#onmenubuttontoolhittest)

- [COleIPFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/coleipframewndex-class.md#onmenubuttontoolhittest)

## <a name="cmfctoolbarbuttononupdatetooltip"></a><a name="onupdatetooltip"></a>CMFCToolBarButton：： OnUpdateToolTip

当父工具栏更新其工具提示文本时由框架调用。

```
virtual BOOL OnUpdateToolTip(
    CWnd* pWndParent,
    int iButtonIndex,
    CToolTipCtrl& wndToolTip,
    CString& str);
```

### <a name="parameters"></a>参数

*pWndParent*<br/>
中父窗口。

*iButtonIndex*<br/>
中父按钮集合中的按钮的从零开始的索引。

*wndToolTip*<br/>
中用于显示工具提示文本的控件。

*字符串*<br/>
弄一个`CString`对象，它接收更新的工具提示文本。

### <a name="return-value"></a>返回值

此方法返回 FALSE。

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作并返回 FALSE。 如果您提供了工具提示文本字符串，则重写此方法以返回一个非零值。

## <a name="cmfctoolbarbuttonpreparedrag"></a><a name="preparedrag"></a>CMFCToolBarButton：:P repareDrag

当按钮即将执行拖放操作时，由框架调用。

```
virtual BOOL PrepareDrag(COleDataSource& srcItem);
```

### <a name="parameters"></a>参数

*srcItem*<br/>
中一个`COleDataSource`对象，该对象存储有关拖放操作的状态信息。

### <a name="return-value"></a>返回值

如果操作成功，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

框架调用此方法来准备工具栏按钮，以将其状态存储在所提供`COleDataSource`的对象中。 此方法通过将自身序列化为共享文件，然后将该文件传递给[COleDataSource：： CacheGlobalData](../../mfc/reference/coledatasource-class.md#cacheglobaldata)方法来存储其状态。 有关工具栏按钮序列化的详细信息，请参阅[CMFCToolBarButton：：串行化](#serialize)。

此方法不执行任何操作，如果无法存储该按钮，则返回 TRUE （ [CMFCToolBarButton：： CanBeStored](#canbestored)方法返回 FALSE）。 如果对象序列化期间发生异常，则返回 FALSE。

有关 OLE 拖放操作的详细信息，请参阅[ole 拖放](../../mfc/drag-and-drop-ole.md)。

## <a name="cmfctoolbarbuttonrect"></a><a name="rect"></a>CMFCToolBarButton：： Rect

检索按钮的边框。

```
const CRect& Rect() const;
```

### <a name="return-value"></a>返回值

一个`CRect`包含按钮的边框的对象。

## <a name="cmfctoolbarbuttonresetimagetodefault"></a><a name="resetimagetodefault"></a>CMFCToolBarButton：： ResetImageToDefault

将设置为与按钮关联的图像的默认值。

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>备注

此方法通过使用[CMFCToolBar：： GetDefaultImage](../../mfc/reference/cmfctoolbar-class.md#getdefaultimage)方法从其父工具栏检索默认图像。 如果该按钮没有关联的默认图像，则此方法将使用[CStringT：： LoadString](../../atl-mfc-shared/reference/cstringt-class.md#loadstring)方法根据其字符串资源设置该按钮的文本标签。 有关字符串资源的详细信息，请参阅使用[资源文件](../../windows/working-with-resource-files.md)。

如果该按钮具有用户定义的图像，则此方法不执行任何操作。

## <a name="cmfctoolbarbuttonsavebarstate"></a><a name="savebarstate"></a>CMFCToolBarButton：： SaveBarState

保存工具栏按钮的状态。

```
virtual void SaveBarState();
```

### <a name="remarks"></a>备注

当框架创建`CMFCToolBarButton`对象作为拖放操作的结果时，框架会调用此方法。

此方法的默认实现不执行任何操作。 重写此方法以将工具栏按钮的状态保存到外部数据源。

## <a name="cmfctoolbarbuttonserialize"></a><a name="serialize"></a>CMFCToolBarButton：：串行化

从存档中读取此对象或将其写入存档。

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>参数

*ar*<br/>
中要`CArchive`从其进行序列化的对象。

### <a name="remarks"></a>备注

此方法支持数据传输过程，例如剪贴板或拖放操作。 它从或向所提供`CArchive`的对象读取或写入按钮的属性，例如 id、文本标签和图像 id。

有关序列化示例，请参阅[序列化：序列化对象](../../mfc/serialization-serializing-an-object.md)。

## <a name="cmfctoolbarbuttonsetaccdata"></a><a name="setaccdata"></a>CMFCToolBarButton：： SetACCData

用工具栏按钮`CAccessibilityData`中的可访问性数据填充提供的对象。

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>参数

*pParent*<br/>
中工具栏按钮的父窗口。

*数据*<br/>
中用`CAccessibilityData`工具栏按钮的可访问性数据填充的对象。

### <a name="return-value"></a>返回值

此方法返回 TRUE。

### <a name="remarks"></a>备注

如果你的工具栏按钮未提供辅助功能数据，则重写此方法以返回 FALSE。

## <a name="cmfctoolbarbuttonsetclipboardformatname"></a><a name="setclipboardformatname"></a>CMFCToolBarButton：： SetClipboardFormatName

重命名全局剪贴板格式。

```
static void __stdcall SetClipboardFormatName(LPCTSTR lpszName);
```

### <a name="parameters"></a>参数

*lpszName*<br/>
中全局剪贴板格式的新名称。 不能为 NULL。

### <a name="remarks"></a>备注

利用此方法，可以在多个应用程序之间执行拖放操作。 每个应用程序必须提供相同的剪贴板格式名称。

必须先调用此方法，然后框架才能调用[CMFCToolBarButton：： GetClipboardFormat](#getclipboardformat)。

## <a name="cmfctoolbarbuttonsetimage"></a><a name="setimage"></a>CMFCToolBarButton：： SetImage

设置按钮的图像索引。

```
virtual void SetImage(int iImage);
```

### <a name="parameters"></a>参数

*iImage*<br/>
中工具栏图像集合中的图像的索引。

### <a name="remarks"></a>备注

如果工具栏按钮是分隔符，则*iImage*是指分隔符按钮的新宽度。

如果*iImage*小于零，则此方法将禁用图像的绘图并启用该按钮的文本标签的绘制。

## <a name="cmfctoolbarbuttonsetprotectedcommands"></a><a name="setprotectedcommands"></a>CMFCToolBarButton：： SetProtectedCommands

设置用户无法自定义的命令的列表。

```
static void SetProtectedCommands(const CList<UINT,UINT>& lstCmds);
```

### <a name="parameters"></a>参数

*lstCmds*<br/>
中受保护命令的列表。

### <a name="remarks"></a>备注

在自定义模式下，框架禁用受保护的工具栏按钮命令。 用户不能对禁用的工具栏按钮执行拖放和编辑操作。

使用[CMFCToolBarButton：： GetProtectedCommands](#getprotectedcommands)方法检索受保护命令的列表。

## <a name="cmfctoolbarbuttonsetradio"></a><a name="setradio"></a>CMFCToolBarButton：： SetRadio

当按钮更改其选中状态时由框架调用。

```
virtual void SetRadio();
```

### <a name="remarks"></a>备注

此方法的默认实现不执行任何操作。 重写此方法，以便在按钮更改其选中状态时执行自定义操作。

## <a name="cmfctoolbarbuttonsetrect"></a><a name="setrect"></a>CMFCToolBarButton：： SetRect

设置按钮的边框。

```cpp
void SetRect(const CRect rect);
```

### <a name="parameters"></a>参数

*rect*<br/>
中按钮的新边框。

### <a name="remarks"></a>备注

此方法在设置新的边框后调用[CMFCToolBarButton：： OnMove](#onmove)方法。

## <a name="cmfctoolbarbuttonsetstyle"></a><a name="setstyle"></a>CMFCToolBarButton：： System.windows.forms.control.setstyle

设置按钮的样式。

```
virtual void SetStyle(UINT nStyle);
```

### <a name="parameters"></a>参数

*nStyle*<br/>
中按钮的新样式。

### <a name="remarks"></a>备注

默认实现将[CMFCToolBarButton：： m_nStyle](#m_nstyle)数据成员设置为*nStyle*。 如果要执行其他处理以处理样式更改，请重写此方法。 有关有效样式标志的列表，请参阅[ToolBar 控件样式](toolbar-control-styles.md)。

## <a name="cmfctoolbarbuttonsetvisible"></a><a name="setvisible"></a>CMFCToolBarButton：： SetVisible

指定按钮是否可见。

```cpp
void SetVisible(BOOL bShow=TRUE);
```

### <a name="parameters"></a>参数

*bShow*<br/>
中一个布尔值，指定是显示还是隐藏按钮。 如果此参数为 TRUE，则显示 "" 按钮。 如果参数为 FALSE，则隐藏按钮。

### <a name="remarks"></a>备注

使用此函数可隐藏或显示特定的工具栏按钮。 调用此方法后，调用[CPane：： AdjustSizeImmediate](../../mfc/reference/cpane-class.md#adjustsizeimmediate)方法。

## <a name="cmfctoolbarbuttonshow"></a><a name="show"></a>CMFCToolBarButton：： Show

显示或隐藏按钮。

```cpp
void Show(BOOL bShow);
```

### <a name="parameters"></a>参数

*bShow*<br/>
中一个布尔值，指定是显示还是隐藏按钮。 如果此参数为 TRUE，则显示 "" 按钮。 如果参数为 FALSE，则隐藏按钮。

### <a name="remarks"></a>备注

当调整工具栏按钮的父工具栏大小时，框架将调用此方法来更新其可见性。 当按钮在工具栏的边界内不再适合时，框架会调用此方法，并将*bShow*设置为 FALSE。 当调整按钮大小后，框架将调用此方法，并将按钮调整到工具栏的边界内后，将*bShow*设置为 TRUE。

使用[CMFCToolBarButton：： SetVisible](#setvisible)方法设置按钮的一般可见性。

此方法在更新按钮的可见性状态后调用[CMFCToolBarButton：： OnShow](#onshow)方法。

## <a name="see-also"></a>另请参阅

[层次结构图](../../mfc/hierarchy-chart.md)<br/>
[类](../../mfc/reference/mfc-classes.md)<br/>
[CMFCToolBar 类](../../mfc/reference/cmfctoolbar-class.md)<br/>
[CMFCToolBarImages 类](../../mfc/reference/cmfctoolbarimages-class.md)
